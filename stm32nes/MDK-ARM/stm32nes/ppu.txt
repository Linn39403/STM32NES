; generated by Component: ARM Compiler 5.06 update 6 (build 750) Tool: ArmCC [4d3637]
; commandline ArmCC [--c99 --split_sections --debug -c --asm --interleave -ostm32nes\ppu.o --depend=stm32nes\ppu.d --cpu=Cortex-M4.fp.sp --apcs=interwork -O0 --diag_suppress=9931 -I../Inc -I../Drivers/STM32F4xx_HAL_Driver/Inc -I../Drivers/CMSIS/Device/ST/STM32F4xx/Include -I../Drivers/CMSIS/Include -I../Drivers/STM32F4xx_HAL_Driver/Inc/Legacy -I.\RTE\_stm32nes -ID:\Keil_v5\Arm\Packs\ARM\CMSIS\5.8.0\CMSIS\Core\Include -ID:\Keil_v5\Arm\Packs\Keil\STM32F4xx_DFP\2.14.0\Drivers\CMSIS\Device\ST\STM32F4xx\Include -D__UVISION_VERSION=531 -D_RTE_ -DSTM32F429xx -D_RTE_ -DUSE_FULL_LL_DRIVER -DSTM32F429xx -DUSE_HAL_DRIVER --omf_browse=stm32nes\ppu.crf ..\Src\ppu.c]
                          THUMB

                          AREA ||i.ppu_init||, CODE, READONLY, ALIGN=2

                  ppu_init PROC
;;;105    
;;;106    void ppu_init(const uint8_t* patterntableptr, uint8_t  ScreenMirrorType )   {   
000000  b538              PUSH     {r3-r5,lr}
000002  4604              MOV      r4,r0
000004  460d              MOV      r5,r1
;;;107        // memset(&PPU_Mem, 0, sizeof(PPU_Mem));   
;;;108        // memset(&Spr_Mem, 0, sizeof(Spr_Mem));   
;;;109        // memset(&PPU_Reg, 0, sizeof(PPU_Reg));   
;;;110       
;;;111        PPU_Mem.patterntable0 =  patterntableptr;   
000006  481a              LDR      r0,|L1.112|
000008  6044              STR      r4,[r0,#4]  ; PPU_Mem
;;;112        PPU_Mem.patterntable1 =  patterntableptr + 0x1000;   
00000a  f5045080          ADD      r0,r4,#0x1000
00000e  4918              LDR      r1,|L1.112|
000010  6088              STR      r0,[r1,#8]  ; PPU_Mem
;;;113           
;;;114        if(ScreenMirrorType == 0){   
000012  b955              CBNZ     r5,|L1.42|
;;;115            PPU_Mem.name_table[0] = &NameTable[0];   
000014  4817              LDR      r0,|L1.116|
000016  60c8              STR      r0,[r1,#0xc]  ; PPU_Mem
;;;116            PPU_Mem.name_table[1] = &NameTable[0];   
000018  4601              MOV      r1,r0
00001a  4815              LDR      r0,|L1.112|
00001c  6101              STR      r1,[r0,#0x10]
;;;117            PPU_Mem.name_table[2] = &NameTable[1024];   
00001e  f5016080          ADD      r0,r1,#0x400
000022  4913              LDR      r1,|L1.112|
000024  6148              STR      r0,[r1,#0x14]
;;;118            PPU_Mem.name_table[3] = &NameTable[1024];   
000026  6188              STR      r0,[r1,#0x18]
000028  e00c              B        |L1.68|
                  |L1.42|
;;;119        }else{                      
;;;120            PPU_Mem.name_table[0] = &NameTable[0];   
00002a  4812              LDR      r0,|L1.116|
00002c  4910              LDR      r1,|L1.112|
00002e  60c8              STR      r0,[r1,#0xc]  ; PPU_Mem
;;;121            PPU_Mem.name_table[1] = &NameTable[1024];   
000030  f5006080          ADD      r0,r0,#0x400
000034  6108              STR      r0,[r1,#0x10]
;;;122            PPU_Mem.name_table[2] = &NameTable[0];   
000036  490f              LDR      r1,|L1.116|
000038  480d              LDR      r0,|L1.112|
00003a  6141              STR      r1,[r0,#0x14]
;;;123            PPU_Mem.name_table[3] = &NameTable[1024];   
00003c  f5016080          ADD      r0,r1,#0x400
000040  490b              LDR      r1,|L1.112|
000042  6188              STR      r0,[r1,#0x18]
                  |L1.68|
;;;124        }   
;;;125       
;;;126        SpriteHitFlag = PPU_Latch_Flag = FALSE;   
000044  2000              MOVS     r0,#0
000046  490c              LDR      r1,|L1.120|
000048  7008              STRB     r0,[r1,#0]
00004a  490c              LDR      r1,|L1.124|
00004c  7008              STRB     r0,[r1,#0]
;;;127    //  PPU_BG_VScrlOrg = PPU_BG_VScrlOrg_Pre = 0;   
;;;128    //  PPU_BG_HScrlOrg = PPU_BG_HScrlOrg_Pre = 0;   
;;;129        PPU_BG_VScrlOrg = 0;   
00004e  490c              LDR      r1,|L1.128|
000050  7008              STRB     r0,[r1,#0]
;;;130        PPU_BG_HScrlOrg = 0;   
000052  490c              LDR      r1,|L1.132|
000054  7008              STRB     r0,[r1,#0]
;;;131    //  PPU_BG_NameTableNum = 0;   
;;;132    //  PPU_AddrTemp = 0;   
;;;133        PPU_scanline = 0;   
000056  490c              LDR      r1,|L1.136|
000058  6008              STR      r0,[r1,#0]  ; PPU_scanline
;;;134    
;;;135        tft_double_push_pxbuf(DisplayBuffer, 32, 0, 256, 240);
00005a  20f0              MOVS     r0,#0xf0
00005c  f44f7380          MOV      r3,#0x100
000060  2200              MOVS     r2,#0
000062  2120              MOVS     r1,#0x20
000064  9000              STR      r0,[sp,#0]
000066  4809              LDR      r0,|L1.140|
000068  f7fffffe          BL       tft_double_push_pxbuf
;;;136    } 
00006c  bd38              POP      {r3-r5,pc}
;;;137       
                          ENDP

00006e  0000              DCW      0x0000
                  |L1.112|
                          DCD      PPU_Mem
                  |L1.116|
                          DCD      NameTable
                  |L1.120|
                          DCD      PPU_Latch_Flag
                  |L1.124|
                          DCD      SpriteHitFlag
                  |L1.128|
                          DCD      PPU_BG_VScrlOrg
                  |L1.132|
                          DCD      PPU_BG_HScrlOrg
                  |L1.136|
                          DCD      PPU_scanline
                  |L1.140|
                          DCD      DisplayBuffer

                          AREA ||i.ppu_render_line||, CODE, READONLY, ALIGN=2

                  ppu_render_line PROC
;;;441       
;;;442    void ppu_render_line(int y_axes)   
000000  b501              PUSH     {r0,lr}
;;;443    {   
000002  b09a              SUB      sp,sp,#0x68
;;;444        int i, render_spr_num, dy_axes;   
;;;445    //  MapperRenderScreen( 1 );   
;;;446       
;;;447        PPU_Reg.R2 &= ~R2_LOST_SPR;  
000004  48fa              LDR      r0,|L2.1008|
000006  7880              LDRB     r0,[r0,#2]  ; PPU_Reg
000008  f0200020          BIC      r0,r0,#0x20
00000c  49f8              LDR      r1,|L2.1008|
00000e  7088              STRB     r0,[r1,#2]
;;;448    //  PPU_BG_VScrlOrg_Pre = PPU_BG_VScrlOrg;
;;;449    //  PPU_BG_HScrlOrg_Pre = PPU_BG_HScrlOrg; 
;;;450        if((PPU_Reg.R1 & R1_BG_VISIBLE) && !(PPU_Reg.R1 & R1_SPR_VISIBLE)) {
000010  4608              MOV      r0,r1
000012  7840              LDRB     r0,[r0,#1]  ; PPU_Reg
000014  f0000008          AND      r0,r0,#8
000018  2800              CMP      r0,#0
00001a  d07d              BEQ      |L2.280|
00001c  4608              MOV      r0,r1
00001e  7840              LDRB     r0,[r0,#1]  ; PPU_Reg
000020  f0000010          AND      r0,r0,#0x10
000024  2800              CMP      r0,#0
000026  d177              BNE      |L2.280|
;;;451            for(i=7; i<256 ; i++){  
000028  2007              MOVS     r0,#7
00002a  9019              STR      r0,[sp,#0x64]
00002c  e00b              B        |L2.70|
                  |L2.46|
;;;452                Buffer_scanline[i] =  NES_Color_Palette[PPU_Mem.image_palette[0]];   
00002e  48f1              LDR      r0,|L2.1012|
000030  7f00              LDRB     r0,[r0,#0x1c]  ; PPU_Mem
000032  49f1              LDR      r1,|L2.1016|
000034  f8311010          LDRH     r1,[r1,r0,LSL #1]
000038  4af0              LDR      r2,|L2.1020|
00003a  9819              LDR      r0,[sp,#0x64]
00003c  f8221010          STRH     r1,[r2,r0,LSL #1]
000040  9819              LDR      r0,[sp,#0x64]         ;451
000042  1c40              ADDS     r0,r0,#1              ;451
000044  9019              STR      r0,[sp,#0x64]         ;451
                  |L2.70|
000046  9819              LDR      r0,[sp,#0x64]         ;451
000048  28ff              CMP      r0,#0xff              ;451
00004a  ddf0              BLE      |L2.46|
;;;453            } 
;;;454            render_bg_line_fast(y_axes); 
00004c  981a              LDR      r0,[sp,#0x68]
00004e  9016              STR      r0,[sp,#0x58]
000050  48e7              LDR      r0,|L2.1008|
000052  7800              LDRB     r0,[r0,#0]  ; PPU_Reg
000054  f0000003          AND      r0,r0,#3
000058  900f              STR      r0,[sp,#0x3c]
00005a  48e5              LDR      r0,|L2.1008|
00005c  7800              LDRB     r0,[r0,#0]  ; PPU_Reg
00005e  f0000010          AND      r0,r0,#0x10
000062  b110              CBZ      r0,|L2.106|
000064  48e3              LDR      r0,|L2.1012|
000066  6880              LDR      r0,[r0,#8]  ; PPU_Mem
000068  e001              B        |L2.110|
                  |L2.106|
00006a  48e2              LDR      r0,|L2.1012|
00006c  6840              LDR      r0,[r0,#4]  ; PPU_Mem
                  |L2.110|
00006e  900e              STR      r0,[sp,#0x38]
000070  49e3              LDR      r1,|L2.1024|
000072  7809              LDRB     r1,[r1,#0]  ; PPU_BG_VScrlOrg
000074  9816              LDR      r0,[sp,#0x58]
000076  4408              ADD      r0,r0,r1
000078  900d              STR      r0,[sp,#0x34]
00007a  980d              LDR      r0,[sp,#0x34]
00007c  28ef              CMP      r0,#0xef
00007e  dd06              BLE      |L2.142|
000080  980d              LDR      r0,[sp,#0x34]
000082  38f0              SUBS     r0,r0,#0xf0
000084  900d              STR      r0,[sp,#0x34]
000086  980f              LDR      r0,[sp,#0x3c]
000088  f0800002          EOR      r0,r0,#2
00008c  900f              STR      r0,[sp,#0x3c]
                  |L2.142|
00008e  980f              LDR      r0,[sp,#0x3c]
000090  900c              STR      r0,[sp,#0x30]
000092  980d              LDR      r0,[sp,#0x34]
000094  900b              STR      r0,[sp,#0x2c]
000096  980b              LDR      r0,[sp,#0x2c]
000098  10c0              ASRS     r0,r0,#3
00009a  9009              STR      r0,[sp,#0x24]
00009c  980b              LDR      r0,[sp,#0x2c]
00009e  f0000007          AND      r0,r0,#7
0000a2  9008              STR      r0,[sp,#0x20]
0000a4  48d7              LDR      r0,|L2.1028|
0000a6  7800              LDRB     r0,[r0,#0]  ; PPU_BG_HScrlOrg
0000a8  f0000007          AND      r0,r0,#7
0000ac  9007              STR      r0,[sp,#0x1c]
0000ae  9807              LDR      r0,[sp,#0x1c]
0000b0  f1c00008          RSB      r0,r0,#8
0000b4  49d1              LDR      r1,|L2.1020|
0000b6  eb010040          ADD      r0,r1,r0,LSL #1
0000ba  9006              STR      r0,[sp,#0x18]
0000bc  49cd              LDR      r1,|L2.1012|
0000be  310c              ADDS     r1,r1,#0xc
0000c0  980c              LDR      r0,[sp,#0x30]
0000c2  f8510020          LDR      r0,[r1,r0,LSL #2]
0000c6  900a              STR      r0,[sp,#0x28]
0000c8  48ce              LDR      r0,|L2.1028|
0000ca  7800              LDRB     r0,[r0,#0]  ; PPU_BG_HScrlOrg
0000cc  10c0              ASRS     r0,r0,#3
0000ce  9014              STR      r0,[sp,#0x50]
0000d0  e090              B        |L2.500|
                  |L2.210|
0000d2  9909              LDR      r1,[sp,#0x24]
0000d4  9814              LDR      r0,[sp,#0x50]
0000d6  eb001141          ADD      r1,r0,r1,LSL #5
0000da  980a              LDR      r0,[sp,#0x28]
0000dc  5c41              LDRB     r1,[r0,r1]
0000de  9808              LDR      r0,[sp,#0x20]
0000e0  eb001001          ADD      r0,r0,r1,LSL #4
0000e4  9004              STR      r0,[sp,#0x10]
0000e6  9904              LDR      r1,[sp,#0x10]
0000e8  980e              LDR      r0,[sp,#0x38]
0000ea  5c40              LDRB     r0,[r0,r1]
0000ec  9012              STR      r0,[sp,#0x48]
0000ee  9804              LDR      r0,[sp,#0x10]
0000f0  3008              ADDS     r0,r0,#8
0000f2  990e              LDR      r1,[sp,#0x38]
0000f4  5c08              LDRB     r0,[r1,r0]
0000f6  9013              STR      r0,[sp,#0x4c]
0000f8  9809              LDR      r0,[sp,#0x24]
0000fa  1080              ASRS     r0,r0,#2
0000fc  f44f7170          MOV      r1,#0x3c0
000100  eb0101c0          ADD      r1,r1,r0,LSL #3
000104  9814              LDR      r0,[sp,#0x50]
000106  eb0101a0          ADD      r1,r1,r0,ASR #2
00010a  980a              LDR      r0,[sp,#0x28]
00010c  5c40              LDRB     r0,[r0,r1]
00010e  9010              STR      r0,[sp,#0x40]
000110  9814              LDR      r0,[sp,#0x50]
000112  f0000102          AND      r1,r0,#2
000116  e000              B        |L2.282|
                  |L2.280|
000118  e116              B        |L2.840|
                  |L2.282|
00011a  9809              LDR      r0,[sp,#0x24]
00011c  f0000002          AND      r0,r0,#2
000120  ea410140          ORR      r1,r1,r0,LSL #1
000124  9810              LDR      r0,[sp,#0x40]
000126  4108              ASRS     r0,r0,r1
000128  0780              LSLS     r0,r0,#30
00012a  0f00              LSRS     r0,r0,#28
00012c  9010              STR      r0,[sp,#0x40]
00012e  2007              MOVS     r0,#7
000130  9015              STR      r0,[sp,#0x54]
000132  e059              B        |L2.488|
                  |L2.308|
000134  9810              LDR      r0,[sp,#0x40]
000136  ea401000          ORR      r0,r0,r0,LSL #4
00013a  b2c0              UXTB     r0,r0
00013c  9011              STR      r0,[sp,#0x44]
00013e  9915              LDR      r1,[sp,#0x54]
000140  9812              LDR      r0,[sp,#0x48]
000142  4108              ASRS     r0,r0,r1
000144  f0000001          AND      r0,r0,#1
000148  9911              LDR      r1,[sp,#0x44]
00014a  4308              ORRS     r0,r0,r1
00014c  9011              STR      r0,[sp,#0x44]
00014e  9915              LDR      r1,[sp,#0x54]
000150  9813              LDR      r0,[sp,#0x4c]
000152  4108              ASRS     r0,r0,r1
000154  f0000101          AND      r1,r0,#1
000158  9811              LDR      r0,[sp,#0x44]
00015a  ea400041          ORR      r0,r0,r1,LSL #1
00015e  9011              STR      r0,[sp,#0x44]
000160  9815              LDR      r0,[sp,#0x54]
000162  1e40              SUBS     r0,r0,#1
000164  9015              STR      r0,[sp,#0x54]
000166  9915              LDR      r1,[sp,#0x54]
000168  9812              LDR      r0,[sp,#0x48]
00016a  4108              ASRS     r0,r0,r1
00016c  f0000101          AND      r1,r0,#1
000170  9811              LDR      r0,[sp,#0x44]
000172  ea401001          ORR      r0,r0,r1,LSL #4
000176  9011              STR      r0,[sp,#0x44]
000178  9915              LDR      r1,[sp,#0x54]
00017a  9813              LDR      r0,[sp,#0x4c]
00017c  4108              ASRS     r0,r0,r1
00017e  f0000101          AND      r1,r0,#1
000182  9811              LDR      r0,[sp,#0x44]
000184  ea401041          ORR      r0,r0,r1,LSL #5
000188  9011              STR      r0,[sp,#0x44]
00018a  9811              LDR      r0,[sp,#0x44]
00018c  f0000003          AND      r0,r0,#3
000190  b918              CBNZ     r0,|L2.410|
000192  9811              LDR      r0,[sp,#0x44]
000194  f0000030          AND      r0,r0,#0x30
000198  b148              CBZ      r0,|L2.430|
                  |L2.410|
00019a  499b              LDR      r1,|L2.1032|
00019c  9811              LDR      r0,[sp,#0x44]
00019e  f8511020          LDR      r1,[r1,r0,LSL #2]
0001a2  9806              LDR      r0,[sp,#0x18]
0001a4  6001              STR      r1,[r0,#0]
0001a6  9806              LDR      r0,[sp,#0x18]
0001a8  1d00              ADDS     r0,r0,#4
0001aa  9006              STR      r0,[sp,#0x18]
0001ac  e019              B        |L2.482|
                  |L2.430|
0001ae  9811              LDR      r0,[sp,#0x44]
0001b0  f0000003          AND      r0,r0,#3
0001b4  b138              CBZ      r0,|L2.454|
0001b6  4994              LDR      r1,|L2.1032|
0001b8  9811              LDR      r0,[sp,#0x44]
0001ba  f8510020          LDR      r0,[r1,r0,LSL #2]
0001be  0c01              LSRS     r1,r0,#16
0001c0  9806              LDR      r0,[sp,#0x18]
0001c2  8001              STRH     r1,[r0,#0]
0001c4  e00a              B        |L2.476|
                  |L2.454|
0001c6  9811              LDR      r0,[sp,#0x44]
0001c8  f0000030          AND      r0,r0,#0x30
0001cc  b130              CBZ      r0,|L2.476|
0001ce  498e              LDR      r1,|L2.1032|
0001d0  9811              LDR      r0,[sp,#0x44]
0001d2  f8310020          LDRH     r0,[r1,r0,LSL #2]
0001d6  b281              UXTH     r1,r0
0001d8  9806              LDR      r0,[sp,#0x18]
0001da  8041              STRH     r1,[r0,#2]
                  |L2.476|
0001dc  9806              LDR      r0,[sp,#0x18]
0001de  1d00              ADDS     r0,r0,#4
0001e0  9006              STR      r0,[sp,#0x18]
                  |L2.482|
0001e2  9815              LDR      r0,[sp,#0x54]
0001e4  1e40              SUBS     r0,r0,#1
0001e6  9015              STR      r0,[sp,#0x54]
                  |L2.488|
0001e8  9815              LDR      r0,[sp,#0x54]
0001ea  2800              CMP      r0,#0
0001ec  daa2              BGE      |L2.308|
0001ee  9814              LDR      r0,[sp,#0x50]
0001f0  1c40              ADDS     r0,r0,#1
0001f2  9014              STR      r0,[sp,#0x50]
                  |L2.500|
0001f4  9814              LDR      r0,[sp,#0x50]
0001f6  2820              CMP      r0,#0x20
0001f8  f6ffaf6b          BLT      |L2.210|
0001fc  980c              LDR      r0,[sp,#0x30]
0001fe  f0800101          EOR      r1,r0,#1
000202  487c              LDR      r0,|L2.1012|
000204  300c              ADDS     r0,r0,#0xc
000206  f8500021          LDR      r0,[r0,r1,LSL #2]
00020a  900a              STR      r0,[sp,#0x28]
00020c  487d              LDR      r0,|L2.1028|
00020e  7800              LDRB     r0,[r0,#0]  ; PPU_BG_HScrlOrg
000210  10c0              ASRS     r0,r0,#3
000212  9005              STR      r0,[sp,#0x14]
000214  2000              MOVS     r0,#0
000216  9014              STR      r0,[sp,#0x50]
000218  e08e              B        |L2.824|
                  |L2.538|
00021a  9909              LDR      r1,[sp,#0x24]
00021c  9814              LDR      r0,[sp,#0x50]
00021e  eb001141          ADD      r1,r0,r1,LSL #5
000222  980a              LDR      r0,[sp,#0x28]
000224  5c41              LDRB     r1,[r0,r1]
000226  9808              LDR      r0,[sp,#0x20]
000228  eb001001          ADD      r0,r0,r1,LSL #4
00022c  9004              STR      r0,[sp,#0x10]
00022e  9904              LDR      r1,[sp,#0x10]
000230  980e              LDR      r0,[sp,#0x38]
000232  5c40              LDRB     r0,[r0,r1]
000234  9012              STR      r0,[sp,#0x48]
000236  9804              LDR      r0,[sp,#0x10]
000238  3008              ADDS     r0,r0,#8
00023a  990e              LDR      r1,[sp,#0x38]
00023c  5c08              LDRB     r0,[r1,r0]
00023e  9013              STR      r0,[sp,#0x4c]
000240  9809              LDR      r0,[sp,#0x24]
000242  1080              ASRS     r0,r0,#2
000244  f44f7170          MOV      r1,#0x3c0
000248  eb0101c0          ADD      r1,r1,r0,LSL #3
00024c  9814              LDR      r0,[sp,#0x50]
00024e  eb0101a0          ADD      r1,r1,r0,ASR #2
000252  980a              LDR      r0,[sp,#0x28]
000254  5c40              LDRB     r0,[r0,r1]
000256  9010              STR      r0,[sp,#0x40]
000258  9814              LDR      r0,[sp,#0x50]
00025a  f0000102          AND      r1,r0,#2
00025e  9809              LDR      r0,[sp,#0x24]
000260  f0000002          AND      r0,r0,#2
000264  ea410140          ORR      r1,r1,r0,LSL #1
000268  9810              LDR      r0,[sp,#0x40]
00026a  4108              ASRS     r0,r0,r1
00026c  0780              LSLS     r0,r0,#30
00026e  0f00              LSRS     r0,r0,#28
000270  9010              STR      r0,[sp,#0x40]
000272  2007              MOVS     r0,#7
000274  9015              STR      r0,[sp,#0x54]
000276  e059              B        |L2.812|
                  |L2.632|
000278  9810              LDR      r0,[sp,#0x40]
00027a  ea401000          ORR      r0,r0,r0,LSL #4
00027e  b2c0              UXTB     r0,r0
000280  9011              STR      r0,[sp,#0x44]
000282  9915              LDR      r1,[sp,#0x54]
000284  9812              LDR      r0,[sp,#0x48]
000286  4108              ASRS     r0,r0,r1
000288  f0000001          AND      r0,r0,#1
00028c  9911              LDR      r1,[sp,#0x44]
00028e  4308              ORRS     r0,r0,r1
000290  9011              STR      r0,[sp,#0x44]
000292  9915              LDR      r1,[sp,#0x54]
000294  9813              LDR      r0,[sp,#0x4c]
000296  4108              ASRS     r0,r0,r1
000298  f0000101          AND      r1,r0,#1
00029c  9811              LDR      r0,[sp,#0x44]
00029e  ea400041          ORR      r0,r0,r1,LSL #1
0002a2  9011              STR      r0,[sp,#0x44]
0002a4  9815              LDR      r0,[sp,#0x54]
0002a6  1e40              SUBS     r0,r0,#1
0002a8  9015              STR      r0,[sp,#0x54]
0002aa  9915              LDR      r1,[sp,#0x54]
0002ac  9812              LDR      r0,[sp,#0x48]
0002ae  4108              ASRS     r0,r0,r1
0002b0  f0000101          AND      r1,r0,#1
0002b4  9811              LDR      r0,[sp,#0x44]
0002b6  ea401001          ORR      r0,r0,r1,LSL #4
0002ba  9011              STR      r0,[sp,#0x44]
0002bc  9915              LDR      r1,[sp,#0x54]
0002be  9813              LDR      r0,[sp,#0x4c]
0002c0  4108              ASRS     r0,r0,r1
0002c2  f0000101          AND      r1,r0,#1
0002c6  9811              LDR      r0,[sp,#0x44]
0002c8  ea401041          ORR      r0,r0,r1,LSL #5
0002cc  9011              STR      r0,[sp,#0x44]
0002ce  9811              LDR      r0,[sp,#0x44]
0002d0  f0000003          AND      r0,r0,#3
0002d4  b918              CBNZ     r0,|L2.734|
0002d6  9811              LDR      r0,[sp,#0x44]
0002d8  f0000030          AND      r0,r0,#0x30
0002dc  b148              CBZ      r0,|L2.754|
                  |L2.734|
0002de  494a              LDR      r1,|L2.1032|
0002e0  9811              LDR      r0,[sp,#0x44]
0002e2  f8511020          LDR      r1,[r1,r0,LSL #2]
0002e6  9806              LDR      r0,[sp,#0x18]
0002e8  6001              STR      r1,[r0,#0]
0002ea  9806              LDR      r0,[sp,#0x18]
0002ec  1d00              ADDS     r0,r0,#4
0002ee  9006              STR      r0,[sp,#0x18]
0002f0  e019              B        |L2.806|
                  |L2.754|
0002f2  9811              LDR      r0,[sp,#0x44]
0002f4  f0000003          AND      r0,r0,#3
0002f8  b138              CBZ      r0,|L2.778|
0002fa  4943              LDR      r1,|L2.1032|
0002fc  9811              LDR      r0,[sp,#0x44]
0002fe  f8510020          LDR      r0,[r1,r0,LSL #2]
000302  0c01              LSRS     r1,r0,#16
000304  9806              LDR      r0,[sp,#0x18]
000306  8001              STRH     r1,[r0,#0]
000308  e00a              B        |L2.800|
                  |L2.778|
00030a  9811              LDR      r0,[sp,#0x44]
00030c  f0000030          AND      r0,r0,#0x30
000310  b130              CBZ      r0,|L2.800|
000312  493d              LDR      r1,|L2.1032|
000314  9811              LDR      r0,[sp,#0x44]
000316  f8310020          LDRH     r0,[r1,r0,LSL #2]
00031a  b281              UXTH     r1,r0
00031c  9806              LDR      r0,[sp,#0x18]
00031e  8041              STRH     r1,[r0,#2]
                  |L2.800|
000320  9806              LDR      r0,[sp,#0x18]
000322  1d00              ADDS     r0,r0,#4
000324  9006              STR      r0,[sp,#0x18]
                  |L2.806|
000326  9815              LDR      r0,[sp,#0x54]
000328  1e40              SUBS     r0,r0,#1
00032a  9015              STR      r0,[sp,#0x54]
                  |L2.812|
00032c  9815              LDR      r0,[sp,#0x54]
00032e  2800              CMP      r0,#0
000330  daa2              BGE      |L2.632|
000332  9814              LDR      r0,[sp,#0x50]
000334  1c40              ADDS     r0,r0,#1
000336  9014              STR      r0,[sp,#0x50]
                  |L2.824|
000338  9905              LDR      r1,[sp,#0x14]
00033a  9814              LDR      r0,[sp,#0x50]
00033c  4288              CMP      r0,r1
00033e  f77faf6c          BLE      |L2.538|
000342  bf00              NOP      
000344  f001b993          B.W      |L2.5742|
                  |L2.840|
;;;455        } else if(PPU_Reg.R1 & (R1_BG_VISIBLE | R1_SPR_VISIBLE)){ 
000348  4829              LDR      r0,|L2.1008|
00034a  7840              LDRB     r0,[r0,#1]  ; PPU_Reg
00034c  f0000018          AND      r0,r0,#0x18
000350  2800              CMP      r0,#0
000352  f0018175          BEQ.W    |L2.5696|
;;;456            for(i=7; i<256 ; i++){  
000356  2007              MOVS     r0,#7
000358  9019              STR      r0,[sp,#0x64]
00035a  e00b              B        |L2.884|
                  |L2.860|
;;;457                Buffer_scanline[i] =  NES_Color_Palette[PPU_Mem.image_palette[0]];   
00035c  4825              LDR      r0,|L2.1012|
00035e  7f00              LDRB     r0,[r0,#0x1c]  ; PPU_Mem
000360  4925              LDR      r1,|L2.1016|
000362  f8311010          LDRH     r1,[r1,r0,LSL #1]
000366  4a25              LDR      r2,|L2.1020|
000368  9819              LDR      r0,[sp,#0x64]
00036a  f8221010          STRH     r1,[r2,r0,LSL #1]
00036e  9819              LDR      r0,[sp,#0x64]         ;456
000370  1c40              ADDS     r0,r0,#1              ;456
000372  9019              STR      r0,[sp,#0x64]         ;456
                  |L2.884|
000374  9819              LDR      r0,[sp,#0x64]         ;456
000376  28ff              CMP      r0,#0xff              ;456
000378  ddf0              BLE      |L2.860|
;;;458            } 
;;;459    
;;;460            const int spr_size = PPU_Reg.R0 & R0_SPR_SIZE ? 0x0F : 0x07;
00037a  481d              LDR      r0,|L2.1008|
00037c  7800              LDRB     r0,[r0,#0]  ; PPU_Reg
00037e  f0000020          AND      r0,r0,#0x20
000382  b108              CBZ      r0,|L2.904|
000384  200f              MOVS     r0,#0xf
000386  e000              B        |L2.906|
                  |L2.904|
000388  2007              MOVS     r0,#7
                  |L2.906|
00038a  9016              STR      r0,[sp,#0x58]
;;;461            
;;;462            if(PPU_Reg.R1 & R1_SPR_VISIBLE){ 
00038c  4818              LDR      r0,|L2.1008|
00038e  7840              LDRB     r0,[r0,#1]  ; PPU_Reg
000390  f0000010          AND      r0,r0,#0x10
000394  2800              CMP      r0,#0
000396  d07d              BEQ      |L2.1172|
;;;463                render_spr_num=0; 
000398  2000              MOVS     r0,#0
00039a  9018              STR      r0,[sp,#0x60]
;;;464                for(i=63; i>=0; i--){   
00039c  203f              MOVS     r0,#0x3f
00039e  9019              STR      r0,[sp,#0x64]
0003a0  e3bd              B        |L2.2846|
                  |L2.930|
;;;465                    if(!(sprite[i].attr & SPR_BG_PRIO)) continue;            //(0=Sprite In front of BG, 1=Sprite Behind BG)   
0003a2  481a              LDR      r0,|L2.1036|
0003a4  6801              LDR      r1,[r0,#0]  ; sprite
0003a6  9819              LDR      r0,[sp,#0x64]
0003a8  eb010080          ADD      r0,r1,r0,LSL #2
0003ac  7880              LDRB     r0,[r0,#2]
0003ae  f0000020          AND      r0,r0,#0x20
0003b2  b900              CBNZ     r0,|L2.950|
0003b4  e3b0              B        |L2.2840|
                  |L2.950|
;;;466                    dy_axes = y_axes - (uint8_t)(sprite[i].y + 1);  
0003b6  4815              LDR      r0,|L2.1036|
0003b8  6801              LDR      r1,[r0,#0]  ; sprite
0003ba  9819              LDR      r0,[sp,#0x64]
0003bc  f8110020          LDRB     r0,[r1,r0,LSL #2]
0003c0  1c40              ADDS     r0,r0,#1
0003c2  b2c1              UXTB     r1,r0
0003c4  981a              LDR      r0,[sp,#0x68]
0003c6  1a40              SUBS     r0,r0,r1
0003c8  9017              STR      r0,[sp,#0x5c]
;;;467                    if(dy_axes != (dy_axes & spr_size)) continue; 
0003ca  e9dd1016          LDRD     r1,r0,[sp,#0x58]
0003ce  4001              ANDS     r1,r1,r0
0003d0  4281              CMP      r1,r0
0003d2  d000              BEQ      |L2.982|
0003d4  e3a0              B        |L2.2840|
                  |L2.982|
;;;468                    render_spr_num++; 
0003d6  9818              LDR      r0,[sp,#0x60]
0003d8  1c40              ADDS     r0,r0,#1
0003da  9018              STR      r0,[sp,#0x60]
;;;469                    if(render_spr_num > 8 ){ 
0003dc  9818              LDR      r0,[sp,#0x60]
0003de  2808              CMP      r0,#8
0003e0  dd16              BLE      |L2.1040|
;;;470                        PPU_Reg.R2 |= R2_LOST_SPR; 
0003e2  4803              LDR      r0,|L2.1008|
0003e4  7880              LDRB     r0,[r0,#2]  ; PPU_Reg
0003e6  f0400020          ORR      r0,r0,#0x20
0003ea  4901              LDR      r1,|L2.1008|
0003ec  7088              STRB     r0,[r1,#2]
;;;471                        break;   
0003ee  e39a              B        |L2.2854|
                  |L2.1008|
                          DCD      PPU_Reg
                  |L2.1012|
                          DCD      PPU_Mem
                  |L2.1016|
                          DCD      NES_Color_Palette
                  |L2.1020|
                          DCD      Buffer_scanline
                  |L2.1024|
                          DCD      PPU_BG_VScrlOrg
                  |L2.1028|
                          DCD      PPU_BG_HScrlOrg
                  |L2.1032|
                          DCD      Premapped_palette
                  |L2.1036|
                          DCD      sprite
                  |L2.1040|
;;;472                    }   
;;;473                    if(PPU_Reg.R0 & R0_SPR_SIZE){ 
000410  48fa              LDR      r0,|L2.2044|
000412  7800              LDRB     r0,[r0,#0]  ; PPU_Reg
000414  f0000020          AND      r0,r0,#0x20
000418  2800              CMP      r0,#0
00041a  d07d              BEQ      |L2.1304|
;;;474                        render_sprite_16(&sprite[i], dy_axes);   
00041c  48f8              LDR      r0,|L2.2048|
00041e  6801              LDR      r1,[r0,#0]  ; sprite
000420  9819              LDR      r0,[sp,#0x64]
000422  eb010080          ADD      r0,r1,r0,LSL #2
000426  9011              STR      r0,[sp,#0x44]
000428  9817              LDR      r0,[sp,#0x5c]
00042a  9012              STR      r0,[sp,#0x48]
00042c  9811              LDR      r0,[sp,#0x44]
00042e  7840              LDRB     r0,[r0,#1]
000430  f0000001          AND      r0,r0,#1
000434  2800              CMP      r0,#0
000436  d071              BEQ      |L2.1308|
000438  9812              LDR      r0,[sp,#0x48]
00043a  2808              CMP      r0,#8
00043c  da6f              BGE      |L2.1310|
00043e  48f1              LDR      r0,|L2.2052|
000440  6880              LDR      r0,[r0,#8]  ; PPU_Mem
000442  900e              STR      r0,[sp,#0x38]
000444  9811              LDR      r0,[sp,#0x44]
000446  7840              LDRB     r0,[r0,#1]
000448  f00000fe          AND      r0,r0,#0xfe
00044c  0100              LSLS     r0,r0,#4
00044e  900f              STR      r0,[sp,#0x3c]
000450  9812              LDR      r0,[sp,#0x48]
000452  b2c0              UXTB     r0,r0
000454  9010              STR      r0,[sp,#0x40]
000456  2000              MOVS     r0,#0
000458  b158              CBZ      r0,|L2.1138|
00045a  9811              LDR      r0,[sp,#0x44]
00045c  78c0              LDRB     r0,[r0,#3]
00045e  2808              CMP      r0,#8
000460  da07              BGE      |L2.1138|
000462  9811              LDR      r0,[sp,#0x44]
000464  78c0              LDRB     r0,[r0,#3]
000466  f1c00008          RSB      r0,r0,#8
00046a  900c              STR      r0,[sp,#0x30]
00046c  980c              LDR      r0,[sp,#0x30]
00046e  b910              CBNZ     r0,|L2.1142|
000470  e092              B        |L2.1432|
                  |L2.1138|
000472  2000              MOVS     r0,#0
000474  900c              STR      r0,[sp,#0x30]
                  |L2.1142|
000476  9811              LDR      r0,[sp,#0x44]
000478  7880              LDRB     r0,[r0,#2]
00047a  f0000080          AND      r0,r0,#0x80
00047e  b120              CBZ      r0,|L2.1162|
000480  9810              LDR      r0,[sp,#0x40]
000482  f1c00007          RSB      r0,r0,#7
000486  b2c0              UXTB     r0,r0
000488  9010              STR      r0,[sp,#0x40]
                  |L2.1162|
00048a  e9dd010f          LDRD     r0,r1,[sp,#0x3c]
00048e  4401              ADD      r1,r1,r0
000490  980e              LDR      r0,[sp,#0x38]
000492  e000              B        |L2.1174|
                  |L2.1172|
000494  e348              B        |L2.2856|
                  |L2.1174|
000496  5c40              LDRB     r0,[r0,r1]
000498  9009              STR      r0,[sp,#0x24]
00049a  e9dd010f          LDRD     r0,r1,[sp,#0x3c]
00049e  4408              ADD      r0,r0,r1
0004a0  3008              ADDS     r0,r0,#8
0004a2  990e              LDR      r1,[sp,#0x38]
0004a4  5c08              LDRB     r0,[r1,r0]
0004a6  900a              STR      r0,[sp,#0x28]
0004a8  9811              LDR      r0,[sp,#0x44]
0004aa  7880              LDRB     r0,[r0,#2]
0004ac  f0000040          AND      r0,r0,#0x40
0004b0  b398              CBZ      r0,|L2.1306|
0004b2  2007              MOVS     r0,#7
0004b4  900d              STR      r0,[sp,#0x34]
0004b6  e02c              B        |L2.1298|
                  |L2.1208|
0004b8  990d              LDR      r1,[sp,#0x34]
0004ba  9809              LDR      r0,[sp,#0x24]
0004bc  4108              ASRS     r0,r0,r1
0004be  f0000001          AND      r0,r0,#1
0004c2  900b              STR      r0,[sp,#0x2c]
0004c4  990d              LDR      r1,[sp,#0x34]
0004c6  980a              LDR      r0,[sp,#0x28]
0004c8  4108              ASRS     r0,r0,r1
0004ca  f0000101          AND      r1,r0,#1
0004ce  980b              LDR      r0,[sp,#0x2c]
0004d0  ea400041          ORR      r0,r0,r1,LSL #1
0004d4  900b              STR      r0,[sp,#0x2c]
0004d6  980b              LDR      r0,[sp,#0x2c]
0004d8  b900              CBNZ     r0,|L2.1244|
0004da  e017              B        |L2.1292|
                  |L2.1244|
0004dc  9811              LDR      r0,[sp,#0x44]
0004de  7880              LDRB     r0,[r0,#2]
0004e0  f0000103          AND      r1,r0,#3
0004e4  980b              LDR      r0,[sp,#0x2c]
0004e6  ea400081          ORR      r0,r0,r1,LSL #2
0004ea  900b              STR      r0,[sp,#0x2c]
0004ec  48c5              LDR      r0,|L2.2052|
0004ee  302c              ADDS     r0,r0,#0x2c
0004f0  990b              LDR      r1,[sp,#0x2c]
0004f2  5c40              LDRB     r0,[r0,r1]
0004f4  49c4              LDR      r1,|L2.2056|
0004f6  f8311010          LDRH     r1,[r1,r0,LSL #1]
0004fa  9811              LDR      r0,[sp,#0x44]
0004fc  78c2              LDRB     r2,[r0,#3]
0004fe  980d              LDR      r0,[sp,#0x34]
000500  4410              ADD      r0,r0,r2
000502  3008              ADDS     r0,r0,#8
000504  4ac1              LDR      r2,|L2.2060|
000506  f8221010          STRH     r1,[r2,r0,LSL #1]
00050a  bf00              NOP      
                  |L2.1292|
00050c  980d              LDR      r0,[sp,#0x34]
00050e  1e40              SUBS     r0,r0,#1
000510  900d              STR      r0,[sp,#0x34]
                  |L2.1298|
000512  e9dd100c          LDRD     r1,r0,[sp,#0x30]
000516  e003              B        |L2.1312|
                  |L2.1304|
000518  e244              B        |L2.2468|
                  |L2.1306|
00051a  e004              B        |L2.1318|
                  |L2.1308|
00051c  e0e4              B        |L2.1768|
                  |L2.1310|
00051e  e03c              B        |L2.1434|
                  |L2.1312|
000520  4288              CMP      r0,r1
000522  dac9              BGE      |L2.1208|
000524  e037              B        |L2.1430|
                  |L2.1318|
000526  2007              MOVS     r0,#7
000528  900d              STR      r0,[sp,#0x34]
00052a  e030              B        |L2.1422|
                  |L2.1324|
00052c  980d              LDR      r0,[sp,#0x34]
00052e  f1c00107          RSB      r1,r0,#7
000532  9809              LDR      r0,[sp,#0x24]
000534  4108              ASRS     r0,r0,r1
000536  f0000001          AND      r0,r0,#1
00053a  900b              STR      r0,[sp,#0x2c]
00053c  980d              LDR      r0,[sp,#0x34]
00053e  f1c00107          RSB      r1,r0,#7
000542  980a              LDR      r0,[sp,#0x28]
000544  4108              ASRS     r0,r0,r1
000546  f0000101          AND      r1,r0,#1
00054a  980b              LDR      r0,[sp,#0x2c]
00054c  ea400041          ORR      r0,r0,r1,LSL #1
000550  900b              STR      r0,[sp,#0x2c]
000552  980b              LDR      r0,[sp,#0x2c]
000554  b900              CBNZ     r0,|L2.1368|
000556  e017              B        |L2.1416|
                  |L2.1368|
000558  9811              LDR      r0,[sp,#0x44]
00055a  7880              LDRB     r0,[r0,#2]
00055c  f0000103          AND      r1,r0,#3
000560  980b              LDR      r0,[sp,#0x2c]
000562  ea400081          ORR      r0,r0,r1,LSL #2
000566  900b              STR      r0,[sp,#0x2c]
000568  48a6              LDR      r0,|L2.2052|
00056a  302c              ADDS     r0,r0,#0x2c
00056c  990b              LDR      r1,[sp,#0x2c]
00056e  5c40              LDRB     r0,[r0,r1]
000570  49a5              LDR      r1,|L2.2056|
000572  f8311010          LDRH     r1,[r1,r0,LSL #1]
000576  9811              LDR      r0,[sp,#0x44]
000578  78c2              LDRB     r2,[r0,#3]
00057a  980d              LDR      r0,[sp,#0x34]
00057c  4410              ADD      r0,r0,r2
00057e  3008              ADDS     r0,r0,#8
000580  4aa2              LDR      r2,|L2.2060|
000582  f8221010          STRH     r1,[r2,r0,LSL #1]
000586  bf00              NOP      
                  |L2.1416|
000588  980d              LDR      r0,[sp,#0x34]
00058a  1e40              SUBS     r0,r0,#1
00058c  900d              STR      r0,[sp,#0x34]
                  |L2.1422|
00058e  e9dd100c          LDRD     r1,r0,[sp,#0x30]
000592  4288              CMP      r0,r1
000594  daca              BGE      |L2.1324|
                  |L2.1430|
000596  bf00              NOP      
                  |L2.1432|
000598  e202              B        |L2.2464|
                  |L2.1434|
00059a  489a              LDR      r0,|L2.2052|
00059c  6880              LDR      r0,[r0,#8]  ; PPU_Mem
00059e  900e              STR      r0,[sp,#0x38]
0005a0  9811              LDR      r0,[sp,#0x44]
0005a2  7840              LDRB     r0,[r0,#1]
0005a4  0100              LSLS     r0,r0,#4
0005a6  900f              STR      r0,[sp,#0x3c]
0005a8  9812              LDR      r0,[sp,#0x48]
0005aa  f0000007          AND      r0,r0,#7
0005ae  9010              STR      r0,[sp,#0x40]
0005b0  2000              MOVS     r0,#0
0005b2  b158              CBZ      r0,|L2.1484|
0005b4  9811              LDR      r0,[sp,#0x44]
0005b6  78c0              LDRB     r0,[r0,#3]
0005b8  2808              CMP      r0,#8
0005ba  da07              BGE      |L2.1484|
0005bc  9811              LDR      r0,[sp,#0x44]
0005be  78c0              LDRB     r0,[r0,#3]
0005c0  f1c00008          RSB      r0,r0,#8
0005c4  900c              STR      r0,[sp,#0x30]
0005c6  980c              LDR      r0,[sp,#0x30]
0005c8  b910              CBNZ     r0,|L2.1488|
0005ca  e08c              B        |L2.1766|
                  |L2.1484|
0005cc  2000              MOVS     r0,#0
0005ce  900c              STR      r0,[sp,#0x30]
                  |L2.1488|
0005d0  9811              LDR      r0,[sp,#0x44]
0005d2  7880              LDRB     r0,[r0,#2]
0005d4  f0000080          AND      r0,r0,#0x80
0005d8  b120              CBZ      r0,|L2.1508|
0005da  9810              LDR      r0,[sp,#0x40]
0005dc  f1c00007          RSB      r0,r0,#7
0005e0  b2c0              UXTB     r0,r0
0005e2  9010              STR      r0,[sp,#0x40]
                  |L2.1508|
0005e4  e9dd010f          LDRD     r0,r1,[sp,#0x3c]
0005e8  4401              ADD      r1,r1,r0
0005ea  980e              LDR      r0,[sp,#0x38]
0005ec  5c40              LDRB     r0,[r0,r1]
0005ee  9009              STR      r0,[sp,#0x24]
0005f0  e9dd010f          LDRD     r0,r1,[sp,#0x3c]
0005f4  4408              ADD      r0,r0,r1
0005f6  3008              ADDS     r0,r0,#8
0005f8  990e              LDR      r1,[sp,#0x38]
0005fa  5c08              LDRB     r0,[r1,r0]
0005fc  900a              STR      r0,[sp,#0x28]
0005fe  9811              LDR      r0,[sp,#0x44]
000600  7880              LDRB     r0,[r0,#2]
000602  f0000040          AND      r0,r0,#0x40
000606  b3a0              CBZ      r0,|L2.1650|
000608  2007              MOVS     r0,#7
00060a  900d              STR      r0,[sp,#0x34]
00060c  e02c              B        |L2.1640|
                  |L2.1550|
00060e  990d              LDR      r1,[sp,#0x34]
000610  9809              LDR      r0,[sp,#0x24]
000612  4108              ASRS     r0,r0,r1
000614  f0000001          AND      r0,r0,#1
000618  900b              STR      r0,[sp,#0x2c]
00061a  990d              LDR      r1,[sp,#0x34]
00061c  980a              LDR      r0,[sp,#0x28]
00061e  4108              ASRS     r0,r0,r1
000620  f0000101          AND      r1,r0,#1
000624  980b              LDR      r0,[sp,#0x2c]
000626  ea400041          ORR      r0,r0,r1,LSL #1
00062a  900b              STR      r0,[sp,#0x2c]
00062c  980b              LDR      r0,[sp,#0x2c]
00062e  b900              CBNZ     r0,|L2.1586|
000630  e017              B        |L2.1634|
                  |L2.1586|
000632  9811              LDR      r0,[sp,#0x44]
000634  7880              LDRB     r0,[r0,#2]
000636  f0000103          AND      r1,r0,#3
00063a  980b              LDR      r0,[sp,#0x2c]
00063c  ea400081          ORR      r0,r0,r1,LSL #2
000640  900b              STR      r0,[sp,#0x2c]
000642  4870              LDR      r0,|L2.2052|
000644  302c              ADDS     r0,r0,#0x2c
000646  990b              LDR      r1,[sp,#0x2c]
000648  5c40              LDRB     r0,[r0,r1]
00064a  496f              LDR      r1,|L2.2056|
00064c  f8311010          LDRH     r1,[r1,r0,LSL #1]
000650  9811              LDR      r0,[sp,#0x44]
000652  78c2              LDRB     r2,[r0,#3]
000654  980d              LDR      r0,[sp,#0x34]
000656  4410              ADD      r0,r0,r2
000658  3008              ADDS     r0,r0,#8
00065a  4a6c              LDR      r2,|L2.2060|
00065c  f8221010          STRH     r1,[r2,r0,LSL #1]
000660  bf00              NOP      
                  |L2.1634|
000662  980d              LDR      r0,[sp,#0x34]
000664  1e40              SUBS     r0,r0,#1
000666  900d              STR      r0,[sp,#0x34]
                  |L2.1640|
000668  e9dd100c          LDRD     r1,r0,[sp,#0x30]
00066c  4288              CMP      r0,r1
00066e  dace              BGE      |L2.1550|
000670  e038              B        |L2.1764|
                  |L2.1650|
000672  e7ff              B        |L2.1652|
                  |L2.1652|
000674  2007              MOVS     r0,#7
000676  900d              STR      r0,[sp,#0x34]
000678  e030              B        |L2.1756|
                  |L2.1658|
00067a  980d              LDR      r0,[sp,#0x34]
00067c  f1c00107          RSB      r1,r0,#7
000680  9809              LDR      r0,[sp,#0x24]
000682  4108              ASRS     r0,r0,r1
000684  f0000001          AND      r0,r0,#1
000688  900b              STR      r0,[sp,#0x2c]
00068a  980d              LDR      r0,[sp,#0x34]
00068c  f1c00107          RSB      r1,r0,#7
000690  980a              LDR      r0,[sp,#0x28]
000692  4108              ASRS     r0,r0,r1
000694  f0000101          AND      r1,r0,#1
000698  980b              LDR      r0,[sp,#0x2c]
00069a  ea400041          ORR      r0,r0,r1,LSL #1
00069e  900b              STR      r0,[sp,#0x2c]
0006a0  980b              LDR      r0,[sp,#0x2c]
0006a2  b900              CBNZ     r0,|L2.1702|
0006a4  e017              B        |L2.1750|
                  |L2.1702|
0006a6  9811              LDR      r0,[sp,#0x44]
0006a8  7880              LDRB     r0,[r0,#2]
0006aa  f0000103          AND      r1,r0,#3
0006ae  980b              LDR      r0,[sp,#0x2c]
0006b0  ea400081          ORR      r0,r0,r1,LSL #2
0006b4  900b              STR      r0,[sp,#0x2c]
0006b6  4853              LDR      r0,|L2.2052|
0006b8  302c              ADDS     r0,r0,#0x2c
0006ba  990b              LDR      r1,[sp,#0x2c]
0006bc  5c40              LDRB     r0,[r0,r1]
0006be  4952              LDR      r1,|L2.2056|
0006c0  f8311010          LDRH     r1,[r1,r0,LSL #1]
0006c4  9811              LDR      r0,[sp,#0x44]
0006c6  78c2              LDRB     r2,[r0,#3]
0006c8  980d              LDR      r0,[sp,#0x34]
0006ca  4410              ADD      r0,r0,r2
0006cc  3008              ADDS     r0,r0,#8
0006ce  4a4f              LDR      r2,|L2.2060|
0006d0  f8221010          STRH     r1,[r2,r0,LSL #1]
0006d4  bf00              NOP      
                  |L2.1750|
0006d6  980d              LDR      r0,[sp,#0x34]
0006d8  1e40              SUBS     r0,r0,#1
0006da  900d              STR      r0,[sp,#0x34]
                  |L2.1756|
0006dc  e9dd100c          LDRD     r1,r0,[sp,#0x30]
0006e0  4288              CMP      r0,r1
0006e2  daca              BGE      |L2.1658|
                  |L2.1764|
0006e4  bf00              NOP      
                  |L2.1766|
0006e6  e15b              B        |L2.2464|
                  |L2.1768|
0006e8  9812              LDR      r0,[sp,#0x48]
0006ea  2808              CMP      r0,#8
0006ec  da6b              BGE      |L2.1990|
0006ee  4845              LDR      r0,|L2.2052|
0006f0  6840              LDR      r0,[r0,#4]  ; PPU_Mem
0006f2  900e              STR      r0,[sp,#0x38]
0006f4  9811              LDR      r0,[sp,#0x44]
0006f6  7840              LDRB     r0,[r0,#1]
0006f8  0100              LSLS     r0,r0,#4
0006fa  900f              STR      r0,[sp,#0x3c]
0006fc  9812              LDR      r0,[sp,#0x48]
0006fe  b2c0              UXTB     r0,r0
000700  9010              STR      r0,[sp,#0x40]
000702  2000              MOVS     r0,#0
000704  b158              CBZ      r0,|L2.1822|
000706  9811              LDR      r0,[sp,#0x44]
000708  78c0              LDRB     r0,[r0,#3]
00070a  2808              CMP      r0,#8
00070c  da07              BGE      |L2.1822|
00070e  9811              LDR      r0,[sp,#0x44]
000710  78c0              LDRB     r0,[r0,#3]
000712  f1c00008          RSB      r0,r0,#8
000716  900c              STR      r0,[sp,#0x30]
000718  980c              LDR      r0,[sp,#0x30]
00071a  b910              CBNZ     r0,|L2.1826|
00071c  e097              B        |L2.2126|
                  |L2.1822|
00071e  2000              MOVS     r0,#0
000720  900c              STR      r0,[sp,#0x30]
                  |L2.1826|
000722  9811              LDR      r0,[sp,#0x44]
000724  7880              LDRB     r0,[r0,#2]
000726  f0000080          AND      r0,r0,#0x80
00072a  b120              CBZ      r0,|L2.1846|
00072c  9810              LDR      r0,[sp,#0x40]
00072e  f1c00007          RSB      r0,r0,#7
000732  b2c0              UXTB     r0,r0
000734  9010              STR      r0,[sp,#0x40]
                  |L2.1846|
000736  e9dd010f          LDRD     r0,r1,[sp,#0x3c]
00073a  4401              ADD      r1,r1,r0
00073c  980e              LDR      r0,[sp,#0x38]
00073e  5c40              LDRB     r0,[r0,r1]
000740  9009              STR      r0,[sp,#0x24]
000742  e9dd010f          LDRD     r0,r1,[sp,#0x3c]
000746  4408              ADD      r0,r0,r1
000748  3008              ADDS     r0,r0,#8
00074a  990e              LDR      r1,[sp,#0x38]
00074c  5c08              LDRB     r0,[r1,r0]
00074e  900a              STR      r0,[sp,#0x28]
000750  9811              LDR      r0,[sp,#0x44]
000752  7880              LDRB     r0,[r0,#2]
000754  f0000040          AND      r0,r0,#0x40
000758  b3a0              CBZ      r0,|L2.1988|
00075a  2007              MOVS     r0,#7
00075c  900d              STR      r0,[sp,#0x34]
00075e  e02c              B        |L2.1978|
                  |L2.1888|
000760  990d              LDR      r1,[sp,#0x34]
000762  9809              LDR      r0,[sp,#0x24]
000764  4108              ASRS     r0,r0,r1
000766  f0000001          AND      r0,r0,#1
00076a  900b              STR      r0,[sp,#0x2c]
00076c  990d              LDR      r1,[sp,#0x34]
00076e  980a              LDR      r0,[sp,#0x28]
000770  4108              ASRS     r0,r0,r1
000772  f0000101          AND      r1,r0,#1
000776  980b              LDR      r0,[sp,#0x2c]
000778  ea400041          ORR      r0,r0,r1,LSL #1
00077c  900b              STR      r0,[sp,#0x2c]
00077e  980b              LDR      r0,[sp,#0x2c]
000780  b900              CBNZ     r0,|L2.1924|
000782  e017              B        |L2.1972|
                  |L2.1924|
000784  9811              LDR      r0,[sp,#0x44]
000786  7880              LDRB     r0,[r0,#2]
000788  f0000103          AND      r1,r0,#3
00078c  980b              LDR      r0,[sp,#0x2c]
00078e  ea400081          ORR      r0,r0,r1,LSL #2
000792  900b              STR      r0,[sp,#0x2c]
000794  481b              LDR      r0,|L2.2052|
000796  302c              ADDS     r0,r0,#0x2c
000798  990b              LDR      r1,[sp,#0x2c]
00079a  5c40              LDRB     r0,[r0,r1]
00079c  491a              LDR      r1,|L2.2056|
00079e  f8311010          LDRH     r1,[r1,r0,LSL #1]
0007a2  9811              LDR      r0,[sp,#0x44]
0007a4  78c2              LDRB     r2,[r0,#3]
0007a6  980d              LDR      r0,[sp,#0x34]
0007a8  4410              ADD      r0,r0,r2
0007aa  3008              ADDS     r0,r0,#8
0007ac  4a17              LDR      r2,|L2.2060|
0007ae  f8221010          STRH     r1,[r2,r0,LSL #1]
0007b2  bf00              NOP      
                  |L2.1972|
0007b4  980d              LDR      r0,[sp,#0x34]
0007b6  1e40              SUBS     r0,r0,#1
0007b8  900d              STR      r0,[sp,#0x34]
                  |L2.1978|
0007ba  e9dd100c          LDRD     r1,r0,[sp,#0x30]
0007be  4288              CMP      r0,r1
0007c0  dace              BGE      |L2.1888|
0007c2  e043              B        |L2.2124|
                  |L2.1988|
0007c4  e000              B        |L2.1992|
                  |L2.1990|
0007c6  e043              B        |L2.2128|
                  |L2.1992|
0007c8  2007              MOVS     r0,#7
0007ca  900d              STR      r0,[sp,#0x34]
0007cc  e03a              B        |L2.2116|
                  |L2.1998|
0007ce  980d              LDR      r0,[sp,#0x34]
0007d0  f1c00107          RSB      r1,r0,#7
0007d4  9809              LDR      r0,[sp,#0x24]
0007d6  4108              ASRS     r0,r0,r1
0007d8  f0000001          AND      r0,r0,#1
0007dc  900b              STR      r0,[sp,#0x2c]
0007de  980d              LDR      r0,[sp,#0x34]
0007e0  f1c00107          RSB      r1,r0,#7
0007e4  980a              LDR      r0,[sp,#0x28]
0007e6  4108              ASRS     r0,r0,r1
0007e8  f0000101          AND      r1,r0,#1
0007ec  980b              LDR      r0,[sp,#0x2c]
0007ee  ea400041          ORR      r0,r0,r1,LSL #1
0007f2  900b              STR      r0,[sp,#0x2c]
0007f4  980b              LDR      r0,[sp,#0x2c]
0007f6  b958              CBNZ     r0,|L2.2064|
0007f8  e021              B        |L2.2110|
0007fa  0000              DCW      0x0000
                  |L2.2044|
                          DCD      PPU_Reg
                  |L2.2048|
                          DCD      sprite
                  |L2.2052|
                          DCD      PPU_Mem
                  |L2.2056|
                          DCD      NES_Color_Palette
                  |L2.2060|
                          DCD      Buffer_scanline
                  |L2.2064|
000810  9811              LDR      r0,[sp,#0x44]
000812  7880              LDRB     r0,[r0,#2]
000814  f0000103          AND      r1,r0,#3
000818  980b              LDR      r0,[sp,#0x2c]
00081a  ea400081          ORR      r0,r0,r1,LSL #2
00081e  900b              STR      r0,[sp,#0x2c]
000820  48fe              LDR      r0,|L2.3100|
000822  990b              LDR      r1,[sp,#0x2c]
000824  5c40              LDRB     r0,[r0,r1]
000826  49fe              LDR      r1,|L2.3104|
000828  f8311010          LDRH     r1,[r1,r0,LSL #1]
00082c  9811              LDR      r0,[sp,#0x44]
00082e  78c2              LDRB     r2,[r0,#3]
000830  980d              LDR      r0,[sp,#0x34]
000832  4410              ADD      r0,r0,r2
000834  3008              ADDS     r0,r0,#8
000836  4afb              LDR      r2,|L2.3108|
000838  f8221010          STRH     r1,[r2,r0,LSL #1]
00083c  bf00              NOP      
                  |L2.2110|
00083e  980d              LDR      r0,[sp,#0x34]
000840  1e40              SUBS     r0,r0,#1
000842  900d              STR      r0,[sp,#0x34]
                  |L2.2116|
000844  e9dd100c          LDRD     r1,r0,[sp,#0x30]
000848  4288              CMP      r0,r1
00084a  dac0              BGE      |L2.1998|
                  |L2.2124|
00084c  bf00              NOP      
                  |L2.2126|
00084e  e0a7              B        |L2.2464|
                  |L2.2128|
000850  48f2              LDR      r0,|L2.3100|
000852  382c              SUBS     r0,r0,#0x2c
000854  6840              LDR      r0,[r0,#4]  ; PPU_Mem
000856  900e              STR      r0,[sp,#0x38]
000858  9811              LDR      r0,[sp,#0x44]
00085a  7840              LDRB     r0,[r0,#1]
00085c  f0400001          ORR      r0,r0,#1
000860  0100              LSLS     r0,r0,#4
000862  900f              STR      r0,[sp,#0x3c]
000864  9812              LDR      r0,[sp,#0x48]
000866  f0000007          AND      r0,r0,#7
00086a  9010              STR      r0,[sp,#0x40]
00086c  2000              MOVS     r0,#0
00086e  b158              CBZ      r0,|L2.2184|
000870  9811              LDR      r0,[sp,#0x44]
000872  78c0              LDRB     r0,[r0,#3]
000874  2808              CMP      r0,#8
000876  da07              BGE      |L2.2184|
000878  9811              LDR      r0,[sp,#0x44]
00087a  78c0              LDRB     r0,[r0,#3]
00087c  f1c00008          RSB      r0,r0,#8
000880  900c              STR      r0,[sp,#0x30]
000882  980c              LDR      r0,[sp,#0x30]
000884  b910              CBNZ     r0,|L2.2188|
000886  e08a              B        |L2.2462|
                  |L2.2184|
000888  2000              MOVS     r0,#0
00088a  900c              STR      r0,[sp,#0x30]
                  |L2.2188|
00088c  9811              LDR      r0,[sp,#0x44]
00088e  7880              LDRB     r0,[r0,#2]
000890  f0000080          AND      r0,r0,#0x80
000894  b120              CBZ      r0,|L2.2208|
000896  9810              LDR      r0,[sp,#0x40]
000898  f1c00007          RSB      r0,r0,#7
00089c  b2c0              UXTB     r0,r0
00089e  9010              STR      r0,[sp,#0x40]
                  |L2.2208|
0008a0  e9dd010f          LDRD     r0,r1,[sp,#0x3c]
0008a4  4401              ADD      r1,r1,r0
0008a6  980e              LDR      r0,[sp,#0x38]
0008a8  5c40              LDRB     r0,[r0,r1]
0008aa  9009              STR      r0,[sp,#0x24]
0008ac  e9dd010f          LDRD     r0,r1,[sp,#0x3c]
0008b0  4408              ADD      r0,r0,r1
0008b2  3008              ADDS     r0,r0,#8
0008b4  990e              LDR      r1,[sp,#0x38]
0008b6  5c08              LDRB     r0,[r1,r0]
0008b8  900a              STR      r0,[sp,#0x28]
0008ba  9811              LDR      r0,[sp,#0x44]
0008bc  7880              LDRB     r0,[r0,#2]
0008be  f0000040          AND      r0,r0,#0x40
0008c2  b398              CBZ      r0,|L2.2348|
0008c4  2007              MOVS     r0,#7
0008c6  900d              STR      r0,[sp,#0x34]
0008c8  e02b              B        |L2.2338|
                  |L2.2250|
0008ca  990d              LDR      r1,[sp,#0x34]
0008cc  9809              LDR      r0,[sp,#0x24]
0008ce  4108              ASRS     r0,r0,r1
0008d0  f0000001          AND      r0,r0,#1
0008d4  900b              STR      r0,[sp,#0x2c]
0008d6  990d              LDR      r1,[sp,#0x34]
0008d8  980a              LDR      r0,[sp,#0x28]
0008da  4108              ASRS     r0,r0,r1
0008dc  f0000101          AND      r1,r0,#1
0008e0  980b              LDR      r0,[sp,#0x2c]
0008e2  ea400041          ORR      r0,r0,r1,LSL #1
0008e6  900b              STR      r0,[sp,#0x2c]
0008e8  980b              LDR      r0,[sp,#0x2c]
0008ea  b900              CBNZ     r0,|L2.2286|
0008ec  e016              B        |L2.2332|
                  |L2.2286|
0008ee  9811              LDR      r0,[sp,#0x44]
0008f0  7880              LDRB     r0,[r0,#2]
0008f2  f0000103          AND      r1,r0,#3
0008f6  980b              LDR      r0,[sp,#0x2c]
0008f8  ea400081          ORR      r0,r0,r1,LSL #2
0008fc  900b              STR      r0,[sp,#0x2c]
0008fe  48c7              LDR      r0,|L2.3100|
000900  990b              LDR      r1,[sp,#0x2c]
000902  5c40              LDRB     r0,[r0,r1]
000904  49c6              LDR      r1,|L2.3104|
000906  f8311010          LDRH     r1,[r1,r0,LSL #1]
00090a  9811              LDR      r0,[sp,#0x44]
00090c  78c2              LDRB     r2,[r0,#3]
00090e  980d              LDR      r0,[sp,#0x34]
000910  4410              ADD      r0,r0,r2
000912  3008              ADDS     r0,r0,#8
000914  4ac3              LDR      r2,|L2.3108|
000916  f8221010          STRH     r1,[r2,r0,LSL #1]
00091a  bf00              NOP      
                  |L2.2332|
00091c  980d              LDR      r0,[sp,#0x34]
00091e  1e40              SUBS     r0,r0,#1
000920  900d              STR      r0,[sp,#0x34]
                  |L2.2338|
000922  e9dd100c          LDRD     r1,r0,[sp,#0x30]
000926  4288              CMP      r0,r1
000928  dacf              BGE      |L2.2250|
00092a  e037              B        |L2.2460|
                  |L2.2348|
00092c  e7ff              B        |L2.2350|
                  |L2.2350|
00092e  2007              MOVS     r0,#7
000930  900d              STR      r0,[sp,#0x34]
000932  e02f              B        |L2.2452|
                  |L2.2356|
000934  980d              LDR      r0,[sp,#0x34]
000936  f1c00107          RSB      r1,r0,#7
00093a  9809              LDR      r0,[sp,#0x24]
00093c  4108              ASRS     r0,r0,r1
00093e  f0000001          AND      r0,r0,#1
000942  900b              STR      r0,[sp,#0x2c]
000944  980d              LDR      r0,[sp,#0x34]
000946  f1c00107          RSB      r1,r0,#7
00094a  980a              LDR      r0,[sp,#0x28]
00094c  4108              ASRS     r0,r0,r1
00094e  f0000101          AND      r1,r0,#1
000952  980b              LDR      r0,[sp,#0x2c]
000954  ea400041          ORR      r0,r0,r1,LSL #1
000958  900b              STR      r0,[sp,#0x2c]
00095a  980b              LDR      r0,[sp,#0x2c]
00095c  b900              CBNZ     r0,|L2.2400|
00095e  e016              B        |L2.2446|
                  |L2.2400|
000960  9811              LDR      r0,[sp,#0x44]
000962  7880              LDRB     r0,[r0,#2]
000964  f0000103          AND      r1,r0,#3
000968  980b              LDR      r0,[sp,#0x2c]
00096a  ea400081          ORR      r0,r0,r1,LSL #2
00096e  900b              STR      r0,[sp,#0x2c]
000970  48aa              LDR      r0,|L2.3100|
000972  990b              LDR      r1,[sp,#0x2c]
000974  5c41              LDRB     r1,[r0,r1]
000976  48aa              LDR      r0,|L2.3104|
000978  f8301011          LDRH     r1,[r0,r1,LSL #1]
00097c  9811              LDR      r0,[sp,#0x44]
00097e  78c2              LDRB     r2,[r0,#3]
000980  980d              LDR      r0,[sp,#0x34]
000982  4410              ADD      r0,r0,r2
000984  3008              ADDS     r0,r0,#8
000986  4aa7              LDR      r2,|L2.3108|
000988  f8221010          STRH     r1,[r2,r0,LSL #1]
00098c  bf00              NOP      
                  |L2.2446|
00098e  980d              LDR      r0,[sp,#0x34]
000990  1e40              SUBS     r0,r0,#1
000992  900d              STR      r0,[sp,#0x34]
                  |L2.2452|
000994  e9dd100c          LDRD     r1,r0,[sp,#0x30]
000998  4288              CMP      r0,r1
00099a  dacb              BGE      |L2.2356|
                  |L2.2460|
00099c  bf00              NOP      
                  |L2.2462|
00099e  bf00              NOP      
                  |L2.2464|
0009a0  bf00              NOP      
0009a2  e0b8              B        |L2.2838|
                  |L2.2468|
;;;475                    }else{
;;;476                        render_sprite_88(&sprite[i], dy_axes);   
0009a4  48a0              LDR      r0,|L2.3112|
0009a6  6801              LDR      r1,[r0,#0]  ; sprite
0009a8  9819              LDR      r0,[sp,#0x64]
0009aa  eb010080          ADD      r0,r1,r0,LSL #2
0009ae  9011              STR      r0,[sp,#0x44]
0009b0  9817              LDR      r0,[sp,#0x5c]
0009b2  9012              STR      r0,[sp,#0x48]
0009b4  489d              LDR      r0,|L2.3116|
0009b6  7800              LDRB     r0,[r0,#0]  ; PPU_Reg
0009b8  f0000008          AND      r0,r0,#8
0009bc  b118              CBZ      r0,|L2.2502|
0009be  4897              LDR      r0,|L2.3100|
0009c0  382c              SUBS     r0,r0,#0x2c
0009c2  6880              LDR      r0,[r0,#8]  ; PPU_Mem
0009c4  e002              B        |L2.2508|
                  |L2.2502|
0009c6  4895              LDR      r0,|L2.3100|
0009c8  382c              SUBS     r0,r0,#0x2c
0009ca  6840              LDR      r0,[r0,#4]  ; PPU_Mem
                  |L2.2508|
0009cc  9010              STR      r0,[sp,#0x40]
0009ce  9810              LDR      r0,[sp,#0x40]
0009d0  900d              STR      r0,[sp,#0x34]
0009d2  9811              LDR      r0,[sp,#0x44]
0009d4  7840              LDRB     r0,[r0,#1]
0009d6  0100              LSLS     r0,r0,#4
0009d8  900e              STR      r0,[sp,#0x38]
0009da  9812              LDR      r0,[sp,#0x48]
0009dc  b2c0              UXTB     r0,r0
0009de  900f              STR      r0,[sp,#0x3c]
0009e0  2000              MOVS     r0,#0
0009e2  b158              CBZ      r0,|L2.2556|
0009e4  9811              LDR      r0,[sp,#0x44]
0009e6  78c0              LDRB     r0,[r0,#3]
0009e8  2808              CMP      r0,#8
0009ea  da07              BGE      |L2.2556|
0009ec  9811              LDR      r0,[sp,#0x44]
0009ee  78c0              LDRB     r0,[r0,#3]
0009f0  f1c00008          RSB      r0,r0,#8
0009f4  900b              STR      r0,[sp,#0x2c]
0009f6  980b              LDR      r0,[sp,#0x2c]
0009f8  b910              CBNZ     r0,|L2.2560|
0009fa  e08a              B        |L2.2834|
                  |L2.2556|
0009fc  2000              MOVS     r0,#0
0009fe  900b              STR      r0,[sp,#0x2c]
                  |L2.2560|
000a00  9811              LDR      r0,[sp,#0x44]
000a02  7880              LDRB     r0,[r0,#2]
000a04  f0000080          AND      r0,r0,#0x80
000a08  b120              CBZ      r0,|L2.2580|
000a0a  980f              LDR      r0,[sp,#0x3c]
000a0c  f1c00007          RSB      r0,r0,#7
000a10  b2c0              UXTB     r0,r0
000a12  900f              STR      r0,[sp,#0x3c]
                  |L2.2580|
000a14  e9dd010e          LDRD     r0,r1,[sp,#0x38]
000a18  4401              ADD      r1,r1,r0
000a1a  980d              LDR      r0,[sp,#0x34]
000a1c  5c40              LDRB     r0,[r0,r1]
000a1e  9008              STR      r0,[sp,#0x20]
000a20  e9dd010e          LDRD     r0,r1,[sp,#0x38]
000a24  4408              ADD      r0,r0,r1
000a26  3008              ADDS     r0,r0,#8
000a28  990d              LDR      r1,[sp,#0x34]
000a2a  5c08              LDRB     r0,[r1,r0]
000a2c  9009              STR      r0,[sp,#0x24]
000a2e  9811              LDR      r0,[sp,#0x44]
000a30  7880              LDRB     r0,[r0,#2]
000a32  f0000040          AND      r0,r0,#0x40
000a36  b398              CBZ      r0,|L2.2720|
000a38  2007              MOVS     r0,#7
000a3a  900c              STR      r0,[sp,#0x30]
000a3c  e02b              B        |L2.2710|
                  |L2.2622|
000a3e  990c              LDR      r1,[sp,#0x30]
000a40  9808              LDR      r0,[sp,#0x20]
000a42  4108              ASRS     r0,r0,r1
000a44  f0000001          AND      r0,r0,#1
000a48  900a              STR      r0,[sp,#0x28]
000a4a  990c              LDR      r1,[sp,#0x30]
000a4c  9809              LDR      r0,[sp,#0x24]
000a4e  4108              ASRS     r0,r0,r1
000a50  f0000101          AND      r1,r0,#1
000a54  980a              LDR      r0,[sp,#0x28]
000a56  ea400041          ORR      r0,r0,r1,LSL #1
000a5a  900a              STR      r0,[sp,#0x28]
000a5c  980a              LDR      r0,[sp,#0x28]
000a5e  b900              CBNZ     r0,|L2.2658|
000a60  e016              B        |L2.2704|
                  |L2.2658|
000a62  9811              LDR      r0,[sp,#0x44]
000a64  7880              LDRB     r0,[r0,#2]
000a66  f0000103          AND      r1,r0,#3
000a6a  980a              LDR      r0,[sp,#0x28]
000a6c  ea400081          ORR      r0,r0,r1,LSL #2
000a70  900a              STR      r0,[sp,#0x28]
000a72  486a              LDR      r0,|L2.3100|
000a74  990a              LDR      r1,[sp,#0x28]
000a76  5c40              LDRB     r0,[r0,r1]
000a78  4969              LDR      r1,|L2.3104|
000a7a  f8311010          LDRH     r1,[r1,r0,LSL #1]
000a7e  9811              LDR      r0,[sp,#0x44]
000a80  78c2              LDRB     r2,[r0,#3]
000a82  980c              LDR      r0,[sp,#0x30]
000a84  4410              ADD      r0,r0,r2
000a86  3008              ADDS     r0,r0,#8
000a88  4a66              LDR      r2,|L2.3108|
000a8a  f8221010          STRH     r1,[r2,r0,LSL #1]
000a8e  bf00              NOP      
                  |L2.2704|
000a90  980c              LDR      r0,[sp,#0x30]
000a92  1e40              SUBS     r0,r0,#1
000a94  900c              STR      r0,[sp,#0x30]
                  |L2.2710|
000a96  e9dd100b          LDRD     r1,r0,[sp,#0x2c]
000a9a  4288              CMP      r0,r1
000a9c  dacf              BGE      |L2.2622|
000a9e  e037              B        |L2.2832|
                  |L2.2720|
000aa0  e7ff              B        |L2.2722|
                  |L2.2722|
000aa2  2007              MOVS     r0,#7
000aa4  900c              STR      r0,[sp,#0x30]
000aa6  e02f              B        |L2.2824|
                  |L2.2728|
000aa8  980c              LDR      r0,[sp,#0x30]
000aaa  f1c00107          RSB      r1,r0,#7
000aae  9808              LDR      r0,[sp,#0x20]
000ab0  4108              ASRS     r0,r0,r1
000ab2  f0000001          AND      r0,r0,#1
000ab6  900a              STR      r0,[sp,#0x28]
000ab8  980c              LDR      r0,[sp,#0x30]
000aba  f1c00107          RSB      r1,r0,#7
000abe  9809              LDR      r0,[sp,#0x24]
000ac0  4108              ASRS     r0,r0,r1
000ac2  f0000101          AND      r1,r0,#1
000ac6  980a              LDR      r0,[sp,#0x28]
000ac8  ea400041          ORR      r0,r0,r1,LSL #1
000acc  900a              STR      r0,[sp,#0x28]
000ace  980a              LDR      r0,[sp,#0x28]
000ad0  b900              CBNZ     r0,|L2.2772|
000ad2  e016              B        |L2.2818|
                  |L2.2772|
000ad4  9811              LDR      r0,[sp,#0x44]
000ad6  7880              LDRB     r0,[r0,#2]
000ad8  f0000103          AND      r1,r0,#3
000adc  980a              LDR      r0,[sp,#0x28]
000ade  ea400081          ORR      r0,r0,r1,LSL #2
000ae2  900a              STR      r0,[sp,#0x28]
000ae4  484d              LDR      r0,|L2.3100|
000ae6  990a              LDR      r1,[sp,#0x28]
000ae8  5c40              LDRB     r0,[r0,r1]
000aea  494d              LDR      r1,|L2.3104|
000aec  f8311010          LDRH     r1,[r1,r0,LSL #1]
000af0  9811              LDR      r0,[sp,#0x44]
000af2  78c2              LDRB     r2,[r0,#3]
000af4  980c              LDR      r0,[sp,#0x30]
000af6  4410              ADD      r0,r0,r2
000af8  3008              ADDS     r0,r0,#8
000afa  4a4a              LDR      r2,|L2.3108|
000afc  f8221010          STRH     r1,[r2,r0,LSL #1]
000b00  bf00              NOP      
                  |L2.2818|
000b02  980c              LDR      r0,[sp,#0x30]
000b04  1e40              SUBS     r0,r0,#1
000b06  900c              STR      r0,[sp,#0x30]
                  |L2.2824|
000b08  e9dd100b          LDRD     r1,r0,[sp,#0x2c]
000b0c  4288              CMP      r0,r1
000b0e  dacb              BGE      |L2.2728|
                  |L2.2832|
000b10  bf00              NOP      
                  |L2.2834|
000b12  bf00              NOP      
000b14  bf00              NOP      
                  |L2.2838|
000b16  bf00              NOP                            ;465
                  |L2.2840|
000b18  9819              LDR      r0,[sp,#0x64]         ;464
000b1a  1e40              SUBS     r0,r0,#1              ;464
000b1c  9019              STR      r0,[sp,#0x64]         ;464
                  |L2.2846|
000b1e  9819              LDR      r0,[sp,#0x64]         ;464
000b20  2800              CMP      r0,#0                 ;464
000b22  f6bfac3e          BGE      |L2.930|
                  |L2.2854|
000b26  bf00              NOP                            ;471
                  |L2.2856|
;;;477                    }   
;;;478                }      
;;;479            }   
;;;480    
;;;481            if(PPU_Reg.R1 & R1_BG_VISIBLE){  
000b28  4840              LDR      r0,|L2.3116|
000b2a  7840              LDRB     r0,[r0,#1]  ; PPU_Reg
000b2c  f0000008          AND      r0,r0,#8
000b30  2800              CMP      r0,#0
000b32  d071              BEQ      |L2.3096|
;;;482                gpio_set(LED3); 
000b34  f44f4000          MOV      r0,#0x8000
000b38  9012              STR      r0,[sp,#0x48]
000b3a  493d              LDR      r1,|L2.3120|
000b3c  9812              LDR      r0,[sp,#0x48]
000b3e  6188              STR      r0,[r1,#0x18]
000b40  bf00              NOP      
;;;483                render_bg_line_fast(y_axes);    
000b42  981a              LDR      r0,[sp,#0x68]
000b44  9012              STR      r0,[sp,#0x48]
000b46  4839              LDR      r0,|L2.3116|
000b48  7800              LDRB     r0,[r0,#0]  ; PPU_Reg
000b4a  f0000003          AND      r0,r0,#3
000b4e  900b              STR      r0,[sp,#0x2c]
000b50  4836              LDR      r0,|L2.3116|
000b52  7800              LDRB     r0,[r0,#0]  ; PPU_Reg
000b54  f0000010          AND      r0,r0,#0x10
000b58  b118              CBZ      r0,|L2.2914|
000b5a  4830              LDR      r0,|L2.3100|
000b5c  382c              SUBS     r0,r0,#0x2c
000b5e  6880              LDR      r0,[r0,#8]  ; PPU_Mem
000b60  e002              B        |L2.2920|
                  |L2.2914|
000b62  482e              LDR      r0,|L2.3100|
000b64  382c              SUBS     r0,r0,#0x2c
000b66  6840              LDR      r0,[r0,#4]  ; PPU_Mem
                  |L2.2920|
000b68  900a              STR      r0,[sp,#0x28]
000b6a  4932              LDR      r1,|L2.3124|
000b6c  7809              LDRB     r1,[r1,#0]  ; PPU_BG_VScrlOrg
000b6e  9812              LDR      r0,[sp,#0x48]
000b70  4408              ADD      r0,r0,r1
000b72  9009              STR      r0,[sp,#0x24]
000b74  9809              LDR      r0,[sp,#0x24]
000b76  28ef              CMP      r0,#0xef
000b78  dd06              BLE      |L2.2952|
000b7a  9809              LDR      r0,[sp,#0x24]
000b7c  38f0              SUBS     r0,r0,#0xf0
000b7e  9009              STR      r0,[sp,#0x24]
000b80  980b              LDR      r0,[sp,#0x2c]
000b82  f0800002          EOR      r0,r0,#2
000b86  900b              STR      r0,[sp,#0x2c]
                  |L2.2952|
000b88  980b              LDR      r0,[sp,#0x2c]
000b8a  9008              STR      r0,[sp,#0x20]
000b8c  9809              LDR      r0,[sp,#0x24]
000b8e  9007              STR      r0,[sp,#0x1c]
000b90  9807              LDR      r0,[sp,#0x1c]
000b92  10c0              ASRS     r0,r0,#3
000b94  9005              STR      r0,[sp,#0x14]
000b96  9807              LDR      r0,[sp,#0x1c]
000b98  f0000007          AND      r0,r0,#7
000b9c  9004              STR      r0,[sp,#0x10]
000b9e  4826              LDR      r0,|L2.3128|
000ba0  7800              LDRB     r0,[r0,#0]  ; PPU_BG_HScrlOrg
000ba2  f0000007          AND      r0,r0,#7
000ba6  9003              STR      r0,[sp,#0xc]
000ba8  9803              LDR      r0,[sp,#0xc]
000baa  f1c00008          RSB      r0,r0,#8
000bae  491d              LDR      r1,|L2.3108|
000bb0  eb010040          ADD      r0,r1,r0,LSL #1
000bb4  9002              STR      r0,[sp,#8]
000bb6  4919              LDR      r1,|L2.3100|
000bb8  3920              SUBS     r1,r1,#0x20
000bba  9808              LDR      r0,[sp,#0x20]
000bbc  f8510020          LDR      r0,[r1,r0,LSL #2]
000bc0  9006              STR      r0,[sp,#0x18]
000bc2  481d              LDR      r0,|L2.3128|
000bc4  7800              LDRB     r0,[r0,#0]  ; PPU_BG_HScrlOrg
000bc6  10c0              ASRS     r0,r0,#3
000bc8  9010              STR      r0,[sp,#0x40]
000bca  e0a1              B        |L2.3344|
                  |L2.3020|
000bcc  9905              LDR      r1,[sp,#0x14]
000bce  9810              LDR      r0,[sp,#0x40]
000bd0  eb001141          ADD      r1,r0,r1,LSL #5
000bd4  9806              LDR      r0,[sp,#0x18]
000bd6  5c41              LDRB     r1,[r0,r1]
000bd8  9804              LDR      r0,[sp,#0x10]
000bda  eb001001          ADD      r0,r0,r1,LSL #4
000bde  9000              STR      r0,[sp,#0]
000be0  9900              LDR      r1,[sp,#0]
000be2  980a              LDR      r0,[sp,#0x28]
000be4  5c40              LDRB     r0,[r0,r1]
000be6  900e              STR      r0,[sp,#0x38]
000be8  9800              LDR      r0,[sp,#0]
000bea  3008              ADDS     r0,r0,#8
000bec  990a              LDR      r1,[sp,#0x28]
000bee  5c08              LDRB     r0,[r1,r0]
000bf0  900f              STR      r0,[sp,#0x3c]
000bf2  9805              LDR      r0,[sp,#0x14]
000bf4  1080              ASRS     r0,r0,#2
000bf6  f44f7170          MOV      r1,#0x3c0
000bfa  eb0101c0          ADD      r1,r1,r0,LSL #3
000bfe  9810              LDR      r0,[sp,#0x40]
000c00  eb0101a0          ADD      r1,r1,r0,ASR #2
000c04  9806              LDR      r0,[sp,#0x18]
000c06  5c40              LDRB     r0,[r0,r1]
000c08  900c              STR      r0,[sp,#0x30]
000c0a  9810              LDR      r0,[sp,#0x40]
000c0c  f0000102          AND      r1,r0,#2
000c10  9805              LDR      r0,[sp,#0x14]
000c12  f0000002          AND      r0,r0,#2
000c16  e011              B        |L2.3132|
                  |L2.3096|
000c18  e12a              B        |L2.3696|
000c1a  0000              DCW      0x0000
                  |L2.3100|
                          DCD      PPU_Mem+0x2c
                  |L2.3104|
                          DCD      NES_Color_Palette
                  |L2.3108|
                          DCD      Buffer_scanline
                  |L2.3112|
                          DCD      sprite
                  |L2.3116|
                          DCD      PPU_Reg
                  |L2.3120|
                          DCD      0x40020c00
                  |L2.3124|
                          DCD      PPU_BG_VScrlOrg
                  |L2.3128|
                          DCD      PPU_BG_HScrlOrg
                  |L2.3132|
000c3c  ea410140          ORR      r1,r1,r0,LSL #1
000c40  980c              LDR      r0,[sp,#0x30]
000c42  4108              ASRS     r0,r0,r1
000c44  0780              LSLS     r0,r0,#30
000c46  0f00              LSRS     r0,r0,#28
000c48  900c              STR      r0,[sp,#0x30]
000c4a  2007              MOVS     r0,#7
000c4c  9011              STR      r0,[sp,#0x44]
000c4e  e059              B        |L2.3332|
                  |L2.3152|
000c50  980c              LDR      r0,[sp,#0x30]
000c52  ea401000          ORR      r0,r0,r0,LSL #4
000c56  b2c0              UXTB     r0,r0
000c58  900d              STR      r0,[sp,#0x34]
000c5a  9911              LDR      r1,[sp,#0x44]
000c5c  980e              LDR      r0,[sp,#0x38]
000c5e  4108              ASRS     r0,r0,r1
000c60  f0000001          AND      r0,r0,#1
000c64  990d              LDR      r1,[sp,#0x34]
000c66  4308              ORRS     r0,r0,r1
000c68  900d              STR      r0,[sp,#0x34]
000c6a  9911              LDR      r1,[sp,#0x44]
000c6c  980f              LDR      r0,[sp,#0x3c]
000c6e  4108              ASRS     r0,r0,r1
000c70  f0000101          AND      r1,r0,#1
000c74  980d              LDR      r0,[sp,#0x34]
000c76  ea400041          ORR      r0,r0,r1,LSL #1
000c7a  900d              STR      r0,[sp,#0x34]
000c7c  9811              LDR      r0,[sp,#0x44]
000c7e  1e40              SUBS     r0,r0,#1
000c80  9011              STR      r0,[sp,#0x44]
000c82  9911              LDR      r1,[sp,#0x44]
000c84  980e              LDR      r0,[sp,#0x38]
000c86  4108              ASRS     r0,r0,r1
000c88  f0000101          AND      r1,r0,#1
000c8c  980d              LDR      r0,[sp,#0x34]
000c8e  ea401001          ORR      r0,r0,r1,LSL #4
000c92  900d              STR      r0,[sp,#0x34]
000c94  9911              LDR      r1,[sp,#0x44]
000c96  980f              LDR      r0,[sp,#0x3c]
000c98  4108              ASRS     r0,r0,r1
000c9a  f0000101          AND      r1,r0,#1
000c9e  980d              LDR      r0,[sp,#0x34]
000ca0  ea401041          ORR      r0,r0,r1,LSL #5
000ca4  900d              STR      r0,[sp,#0x34]
000ca6  980d              LDR      r0,[sp,#0x34]
000ca8  f0000003          AND      r0,r0,#3
000cac  b918              CBNZ     r0,|L2.3254|
000cae  980d              LDR      r0,[sp,#0x34]
000cb0  f0000030          AND      r0,r0,#0x30
000cb4  b148              CBZ      r0,|L2.3274|
                  |L2.3254|
000cb6  49f7              LDR      r1,|L2.4244|
000cb8  980d              LDR      r0,[sp,#0x34]
000cba  f8511020          LDR      r1,[r1,r0,LSL #2]
000cbe  9802              LDR      r0,[sp,#8]
000cc0  6001              STR      r1,[r0,#0]
000cc2  9802              LDR      r0,[sp,#8]
000cc4  1d00              ADDS     r0,r0,#4
000cc6  9002              STR      r0,[sp,#8]
000cc8  e019              B        |L2.3326|
                  |L2.3274|
000cca  980d              LDR      r0,[sp,#0x34]
000ccc  f0000003          AND      r0,r0,#3
000cd0  b138              CBZ      r0,|L2.3298|
000cd2  49f0              LDR      r1,|L2.4244|
000cd4  980d              LDR      r0,[sp,#0x34]
000cd6  f8510020          LDR      r0,[r1,r0,LSL #2]
000cda  0c01              LSRS     r1,r0,#16
000cdc  9802              LDR      r0,[sp,#8]
000cde  8001              STRH     r1,[r0,#0]
000ce0  e00a              B        |L2.3320|
                  |L2.3298|
000ce2  980d              LDR      r0,[sp,#0x34]
000ce4  f0000030          AND      r0,r0,#0x30
000ce8  b130              CBZ      r0,|L2.3320|
000cea  49ea              LDR      r1,|L2.4244|
000cec  980d              LDR      r0,[sp,#0x34]
000cee  f8310020          LDRH     r0,[r1,r0,LSL #2]
000cf2  b281              UXTH     r1,r0
000cf4  9802              LDR      r0,[sp,#8]
000cf6  8041              STRH     r1,[r0,#2]
                  |L2.3320|
000cf8  9802              LDR      r0,[sp,#8]
000cfa  1d00              ADDS     r0,r0,#4
000cfc  9002              STR      r0,[sp,#8]
                  |L2.3326|
000cfe  9811              LDR      r0,[sp,#0x44]
000d00  1e40              SUBS     r0,r0,#1
000d02  9011              STR      r0,[sp,#0x44]
                  |L2.3332|
000d04  9811              LDR      r0,[sp,#0x44]
000d06  2800              CMP      r0,#0
000d08  daa2              BGE      |L2.3152|
000d0a  9810              LDR      r0,[sp,#0x40]
000d0c  1c40              ADDS     r0,r0,#1
000d0e  9010              STR      r0,[sp,#0x40]
                  |L2.3344|
000d10  9810              LDR      r0,[sp,#0x40]
000d12  2820              CMP      r0,#0x20
000d14  f6ffaf5a          BLT      |L2.3020|
000d18  9808              LDR      r0,[sp,#0x20]
000d1a  f0800101          EOR      r1,r0,#1
000d1e  48de              LDR      r0,|L2.4248|
000d20  f8500021          LDR      r0,[r0,r1,LSL #2]
000d24  9006              STR      r0,[sp,#0x18]
000d26  48dd              LDR      r0,|L2.4252|
000d28  7800              LDRB     r0,[r0,#0]  ; PPU_BG_HScrlOrg
000d2a  10c0              ASRS     r0,r0,#3
000d2c  9001              STR      r0,[sp,#4]
000d2e  2000              MOVS     r0,#0
000d30  9010              STR      r0,[sp,#0x40]
000d32  e08e              B        |L2.3666|
                  |L2.3380|
000d34  9905              LDR      r1,[sp,#0x14]
000d36  9810              LDR      r0,[sp,#0x40]
000d38  eb001141          ADD      r1,r0,r1,LSL #5
000d3c  9806              LDR      r0,[sp,#0x18]
000d3e  5c41              LDRB     r1,[r0,r1]
000d40  9804              LDR      r0,[sp,#0x10]
000d42  eb001001          ADD      r0,r0,r1,LSL #4
000d46  9000              STR      r0,[sp,#0]
000d48  9900              LDR      r1,[sp,#0]
000d4a  980a              LDR      r0,[sp,#0x28]
000d4c  5c40              LDRB     r0,[r0,r1]
000d4e  900e              STR      r0,[sp,#0x38]
000d50  9800              LDR      r0,[sp,#0]
000d52  3008              ADDS     r0,r0,#8
000d54  990a              LDR      r1,[sp,#0x28]
000d56  5c08              LDRB     r0,[r1,r0]
000d58  900f              STR      r0,[sp,#0x3c]
000d5a  9805              LDR      r0,[sp,#0x14]
000d5c  1080              ASRS     r0,r0,#2
000d5e  f44f7170          MOV      r1,#0x3c0
000d62  eb0101c0          ADD      r1,r1,r0,LSL #3
000d66  9810              LDR      r0,[sp,#0x40]
000d68  eb0101a0          ADD      r1,r1,r0,ASR #2
000d6c  9806              LDR      r0,[sp,#0x18]
000d6e  5c40              LDRB     r0,[r0,r1]
000d70  900c              STR      r0,[sp,#0x30]
000d72  9810              LDR      r0,[sp,#0x40]
000d74  f0000102          AND      r1,r0,#2
000d78  9805              LDR      r0,[sp,#0x14]
000d7a  f0000002          AND      r0,r0,#2
000d7e  ea410140          ORR      r1,r1,r0,LSL #1
000d82  980c              LDR      r0,[sp,#0x30]
000d84  4108              ASRS     r0,r0,r1
000d86  0780              LSLS     r0,r0,#30
000d88  0f00              LSRS     r0,r0,#28
000d8a  900c              STR      r0,[sp,#0x30]
000d8c  2007              MOVS     r0,#7
000d8e  9011              STR      r0,[sp,#0x44]
000d90  e059              B        |L2.3654|
                  |L2.3474|
000d92  980c              LDR      r0,[sp,#0x30]
000d94  ea401000          ORR      r0,r0,r0,LSL #4
000d98  b2c0              UXTB     r0,r0
000d9a  900d              STR      r0,[sp,#0x34]
000d9c  9911              LDR      r1,[sp,#0x44]
000d9e  980e              LDR      r0,[sp,#0x38]
000da0  4108              ASRS     r0,r0,r1
000da2  f0000001          AND      r0,r0,#1
000da6  990d              LDR      r1,[sp,#0x34]
000da8  4308              ORRS     r0,r0,r1
000daa  900d              STR      r0,[sp,#0x34]
000dac  9911              LDR      r1,[sp,#0x44]
000dae  980f              LDR      r0,[sp,#0x3c]
000db0  4108              ASRS     r0,r0,r1
000db2  f0000101          AND      r1,r0,#1
000db6  980d              LDR      r0,[sp,#0x34]
000db8  ea400041          ORR      r0,r0,r1,LSL #1
000dbc  900d              STR      r0,[sp,#0x34]
000dbe  9811              LDR      r0,[sp,#0x44]
000dc0  1e40              SUBS     r0,r0,#1
000dc2  9011              STR      r0,[sp,#0x44]
000dc4  9911              LDR      r1,[sp,#0x44]
000dc6  980e              LDR      r0,[sp,#0x38]
000dc8  4108              ASRS     r0,r0,r1
000dca  f0000101          AND      r1,r0,#1
000dce  980d              LDR      r0,[sp,#0x34]
000dd0  ea401001          ORR      r0,r0,r1,LSL #4
000dd4  900d              STR      r0,[sp,#0x34]
000dd6  9911              LDR      r1,[sp,#0x44]
000dd8  980f              LDR      r0,[sp,#0x3c]
000dda  4108              ASRS     r0,r0,r1
000ddc  f0000101          AND      r1,r0,#1
000de0  980d              LDR      r0,[sp,#0x34]
000de2  ea401041          ORR      r0,r0,r1,LSL #5
000de6  900d              STR      r0,[sp,#0x34]
000de8  980d              LDR      r0,[sp,#0x34]
000dea  f0000003          AND      r0,r0,#3
000dee  b918              CBNZ     r0,|L2.3576|
000df0  980d              LDR      r0,[sp,#0x34]
000df2  f0000030          AND      r0,r0,#0x30
000df6  b148              CBZ      r0,|L2.3596|
                  |L2.3576|
000df8  49a6              LDR      r1,|L2.4244|
000dfa  980d              LDR      r0,[sp,#0x34]
000dfc  f8511020          LDR      r1,[r1,r0,LSL #2]
000e00  9802              LDR      r0,[sp,#8]
000e02  6001              STR      r1,[r0,#0]
000e04  9802              LDR      r0,[sp,#8]
000e06  1d00              ADDS     r0,r0,#4
000e08  9002              STR      r0,[sp,#8]
000e0a  e019              B        |L2.3648|
                  |L2.3596|
000e0c  980d              LDR      r0,[sp,#0x34]
000e0e  f0000003          AND      r0,r0,#3
000e12  b138              CBZ      r0,|L2.3620|
000e14  499f              LDR      r1,|L2.4244|
000e16  980d              LDR      r0,[sp,#0x34]
000e18  f8510020          LDR      r0,[r1,r0,LSL #2]
000e1c  0c01              LSRS     r1,r0,#16
000e1e  9802              LDR      r0,[sp,#8]
000e20  8001              STRH     r1,[r0,#0]
000e22  e00a              B        |L2.3642|
                  |L2.3620|
000e24  980d              LDR      r0,[sp,#0x34]
000e26  f0000030          AND      r0,r0,#0x30
000e2a  b130              CBZ      r0,|L2.3642|
000e2c  4999              LDR      r1,|L2.4244|
000e2e  980d              LDR      r0,[sp,#0x34]
000e30  f8310020          LDRH     r0,[r1,r0,LSL #2]
000e34  b281              UXTH     r1,r0
000e36  9802              LDR      r0,[sp,#8]
000e38  8041              STRH     r1,[r0,#2]
                  |L2.3642|
000e3a  9802              LDR      r0,[sp,#8]
000e3c  1d00              ADDS     r0,r0,#4
000e3e  9002              STR      r0,[sp,#8]
                  |L2.3648|
000e40  9811              LDR      r0,[sp,#0x44]
000e42  1e40              SUBS     r0,r0,#1
000e44  9011              STR      r0,[sp,#0x44]
                  |L2.3654|
000e46  9811              LDR      r0,[sp,#0x44]
000e48  2800              CMP      r0,#0
000e4a  daa2              BGE      |L2.3474|
000e4c  9810              LDR      r0,[sp,#0x40]
000e4e  1c40              ADDS     r0,r0,#1
000e50  9010              STR      r0,[sp,#0x40]
                  |L2.3666|
000e52  9901              LDR      r1,[sp,#4]
000e54  9810              LDR      r0,[sp,#0x40]
000e56  4288              CMP      r0,r1
000e58  f77faf6c          BLE      |L2.3380|
000e5c  bf00              NOP      
;;;484                gpio_reset(LED3); 
000e5e  f44f4000          MOV      r0,#0x8000
000e62  9012              STR      r0,[sp,#0x48]
000e64  9812              LDR      r0,[sp,#0x48]
000e66  0400              LSLS     r0,r0,#16
000e68  498d              LDR      r1,|L2.4256|
000e6a  6188              STR      r0,[r1,#0x18]
000e6c  bf00              NOP      
000e6e  bf00              NOP      
                  |L2.3696|
;;;485            }   
;;;486    
;;;487            if(PPU_Reg.R1 & R1_SPR_VISIBLE){  
000e70  488c              LDR      r0,|L2.4260|
000e72  7840              LDRB     r0,[r0,#1]  ; PPU_Reg
000e74  f0000010          AND      r0,r0,#0x10
000e78  2800              CMP      r0,#0
000e7a  d07d              BEQ      |L2.3960|
;;;488                render_spr_num=0; 
000e7c  2000              MOVS     r0,#0
000e7e  9018              STR      r0,[sp,#0x60]
;;;489                for(i=63; i>=0; i--){ 
000e80  203f              MOVS     r0,#0x3f
000e82  9019              STR      r0,[sp,#0x64]
000e84  e3bc              B        |L2.5632|
                  |L2.3718|
;;;490                    if(sprite[i].attr & SPR_BG_PRIO)    continue;            //(0=Sprite In front of BG, 1=Sprite Behind BG)   
000e86  4888              LDR      r0,|L2.4264|
000e88  6801              LDR      r1,[r0,#0]  ; sprite
000e8a  9819              LDR      r0,[sp,#0x64]
000e8c  eb010080          ADD      r0,r1,r0,LSL #2
000e90  7880              LDRB     r0,[r0,#2]
000e92  f0000020          AND      r0,r0,#0x20
000e96  b100              CBZ      r0,|L2.3738|
000e98  e3af              B        |L2.5626|
                  |L2.3738|
;;;491                    dy_axes = y_axes - ((int)sprite[i].y + 1);    
000e9a  4883              LDR      r0,|L2.4264|
000e9c  6801              LDR      r1,[r0,#0]  ; sprite
000e9e  9819              LDR      r0,[sp,#0x64]
000ea0  f8110020          LDRB     r0,[r1,r0,LSL #2]
000ea4  1c40              ADDS     r0,r0,#1
000ea6  991a              LDR      r1,[sp,#0x68]
000ea8  1a08              SUBS     r0,r1,r0
000eaa  9017              STR      r0,[sp,#0x5c]
;;;492                    if(dy_axes != (dy_axes & spr_size)) continue; 
000eac  e9dd1016          LDRD     r1,r0,[sp,#0x58]
000eb0  4008              ANDS     r0,r0,r1
000eb2  9917              LDR      r1,[sp,#0x5c]
000eb4  4288              CMP      r0,r1
000eb6  d000              BEQ      |L2.3770|
000eb8  e39f              B        |L2.5626|
                  |L2.3770|
;;;493                    render_spr_num++;          
000eba  9818              LDR      r0,[sp,#0x60]
000ebc  1c40              ADDS     r0,r0,#1
000ebe  9018              STR      r0,[sp,#0x60]
;;;494                    if(render_spr_num > 8 ){     
000ec0  9818              LDR      r0,[sp,#0x60]
000ec2  2808              CMP      r0,#8
000ec4  dd06              BLE      |L2.3796|
;;;495                        PPU_Reg.R2 |= R2_LOST_SPR;
000ec6  4877              LDR      r0,|L2.4260|
000ec8  7880              LDRB     r0,[r0,#2]  ; PPU_Reg
000eca  f0400020          ORR      r0,r0,#0x20
000ece  4975              LDR      r1,|L2.4260|
000ed0  7088              STRB     r0,[r1,#2]
;;;496                        break;   
000ed2  e399              B        |L2.5640|
                  |L2.3796|
;;;497                    }   
;;;498                    if(PPU_Reg.R0 & R0_SPR_SIZE){ 
000ed4  4873              LDR      r0,|L2.4260|
000ed6  7800              LDRB     r0,[r0,#0]  ; PPU_Reg
000ed8  f0000020          AND      r0,r0,#0x20
000edc  2800              CMP      r0,#0
000ede  d07c              BEQ      |L2.4058|
;;;499                        render_sprite_16(&sprite[i], dy_axes);   
000ee0  4871              LDR      r0,|L2.4264|
000ee2  6801              LDR      r1,[r0,#0]  ; sprite
000ee4  9819              LDR      r0,[sp,#0x64]
000ee6  eb010080          ADD      r0,r1,r0,LSL #2
000eea  9011              STR      r0,[sp,#0x44]
000eec  9817              LDR      r0,[sp,#0x5c]
000eee  9012              STR      r0,[sp,#0x48]
000ef0  9811              LDR      r0,[sp,#0x44]
000ef2  7840              LDRB     r0,[r0,#1]
000ef4  f0000001          AND      r0,r0,#1
000ef8  2800              CMP      r0,#0
000efa  d070              BEQ      |L2.4062|
000efc  9812              LDR      r0,[sp,#0x48]
000efe  2808              CMP      r0,#8
000f00  da6e              BGE      |L2.4064|
000f02  4865              LDR      r0,|L2.4248|
000f04  380c              SUBS     r0,r0,#0xc
000f06  6880              LDR      r0,[r0,#8]  ; PPU_Mem
000f08  900e              STR      r0,[sp,#0x38]
000f0a  9811              LDR      r0,[sp,#0x44]
000f0c  7840              LDRB     r0,[r0,#1]
000f0e  f00000fe          AND      r0,r0,#0xfe
000f12  0100              LSLS     r0,r0,#4
000f14  900f              STR      r0,[sp,#0x3c]
000f16  9812              LDR      r0,[sp,#0x48]
000f18  b2c0              UXTB     r0,r0
000f1a  9010              STR      r0,[sp,#0x40]
000f1c  2000              MOVS     r0,#0
000f1e  b158              CBZ      r0,|L2.3896|
000f20  9811              LDR      r0,[sp,#0x44]
000f22  78c0              LDRB     r0,[r0,#3]
000f24  2808              CMP      r0,#8
000f26  da07              BGE      |L2.3896|
000f28  9811              LDR      r0,[sp,#0x44]
000f2a  78c0              LDRB     r0,[r0,#3]
000f2c  f1c00008          RSB      r0,r0,#8
000f30  900c              STR      r0,[sp,#0x30]
000f32  980c              LDR      r0,[sp,#0x30]
000f34  b910              CBNZ     r0,|L2.3900|
000f36  e092              B        |L2.4190|
                  |L2.3896|
000f38  2000              MOVS     r0,#0
000f3a  900c              STR      r0,[sp,#0x30]
                  |L2.3900|
000f3c  9811              LDR      r0,[sp,#0x44]
000f3e  7880              LDRB     r0,[r0,#2]
000f40  f0000080          AND      r0,r0,#0x80
000f44  b120              CBZ      r0,|L2.3920|
000f46  9810              LDR      r0,[sp,#0x40]
000f48  f1c00007          RSB      r0,r0,#7
000f4c  b2c0              UXTB     r0,r0
000f4e  9010              STR      r0,[sp,#0x40]
                  |L2.3920|
000f50  e9dd010f          LDRD     r0,r1,[sp,#0x3c]
000f54  4401              ADD      r1,r1,r0
000f56  980e              LDR      r0,[sp,#0x38]
000f58  5c40              LDRB     r0,[r0,r1]
000f5a  9009              STR      r0,[sp,#0x24]
000f5c  e9dd010f          LDRD     r0,r1,[sp,#0x3c]
000f60  4408              ADD      r0,r0,r1
000f62  3008              ADDS     r0,r0,#8
000f64  990e              LDR      r1,[sp,#0x38]
000f66  5c08              LDRB     r0,[r1,r0]
000f68  900a              STR      r0,[sp,#0x28]
000f6a  9811              LDR      r0,[sp,#0x44]
000f6c  7880              LDRB     r0,[r0,#2]
000f6e  f0000040          AND      r0,r0,#0x40
000f72  b398              CBZ      r0,|L2.4060|
000f74  2007              MOVS     r0,#7
000f76  e000              B        |L2.3962|
                  |L2.3960|
000f78  e347              B        |L2.5642|
                  |L2.3962|
000f7a  900d              STR      r0,[sp,#0x34]
000f7c  e02c              B        |L2.4056|
                  |L2.3966|
000f7e  990d              LDR      r1,[sp,#0x34]
000f80  9809              LDR      r0,[sp,#0x24]
000f82  4108              ASRS     r0,r0,r1
000f84  f0000001          AND      r0,r0,#1
000f88  900b              STR      r0,[sp,#0x2c]
000f8a  990d              LDR      r1,[sp,#0x34]
000f8c  980a              LDR      r0,[sp,#0x28]
000f8e  4108              ASRS     r0,r0,r1
000f90  f0000101          AND      r1,r0,#1
000f94  980b              LDR      r0,[sp,#0x2c]
000f96  ea400041          ORR      r0,r0,r1,LSL #1
000f9a  900b              STR      r0,[sp,#0x2c]
000f9c  980b              LDR      r0,[sp,#0x2c]
000f9e  b900              CBNZ     r0,|L2.4002|
000fa0  e017              B        |L2.4050|
                  |L2.4002|
000fa2  9811              LDR      r0,[sp,#0x44]
000fa4  7880              LDRB     r0,[r0,#2]
000fa6  f0000103          AND      r1,r0,#3
000faa  980b              LDR      r0,[sp,#0x2c]
000fac  ea400081          ORR      r0,r0,r1,LSL #2
000fb0  900b              STR      r0,[sp,#0x2c]
000fb2  4839              LDR      r0,|L2.4248|
000fb4  3020              ADDS     r0,r0,#0x20
000fb6  990b              LDR      r1,[sp,#0x2c]
000fb8  5c40              LDRB     r0,[r0,r1]
000fba  493c              LDR      r1,|L2.4268|
000fbc  f8311010          LDRH     r1,[r1,r0,LSL #1]
000fc0  9811              LDR      r0,[sp,#0x44]
000fc2  78c2              LDRB     r2,[r0,#3]
000fc4  980d              LDR      r0,[sp,#0x34]
000fc6  4410              ADD      r0,r0,r2
000fc8  3008              ADDS     r0,r0,#8
000fca  4a39              LDR      r2,|L2.4272|
000fcc  f8221010          STRH     r1,[r2,r0,LSL #1]
000fd0  bf00              NOP      
                  |L2.4050|
000fd2  980d              LDR      r0,[sp,#0x34]
000fd4  1e40              SUBS     r0,r0,#1
000fd6  900d              STR      r0,[sp,#0x34]
                  |L2.4056|
000fd8  e003              B        |L2.4066|
                  |L2.4058|
000fda  e24a              B        |L2.5234|
                  |L2.4060|
000fdc  e006              B        |L2.4076|
                  |L2.4062|
000fde  e0f5              B        |L2.4556|
                  |L2.4064|
000fe0  e03e              B        |L2.4192|
                  |L2.4066|
000fe2  e9dd100c          LDRD     r1,r0,[sp,#0x30]
000fe6  4288              CMP      r0,r1
000fe8  dac9              BGE      |L2.3966|
000fea  e037              B        |L2.4188|
                  |L2.4076|
000fec  2007              MOVS     r0,#7
000fee  900d              STR      r0,[sp,#0x34]
000ff0  e030              B        |L2.4180|
                  |L2.4082|
000ff2  980d              LDR      r0,[sp,#0x34]
000ff4  f1c00107          RSB      r1,r0,#7
000ff8  9809              LDR      r0,[sp,#0x24]
000ffa  4108              ASRS     r0,r0,r1
000ffc  f0000001          AND      r0,r0,#1
001000  900b              STR      r0,[sp,#0x2c]
001002  980d              LDR      r0,[sp,#0x34]
001004  f1c00107          RSB      r1,r0,#7
001008  980a              LDR      r0,[sp,#0x28]
00100a  4108              ASRS     r0,r0,r1
00100c  f0000101          AND      r1,r0,#1
001010  980b              LDR      r0,[sp,#0x2c]
001012  ea400041          ORR      r0,r0,r1,LSL #1
001016  900b              STR      r0,[sp,#0x2c]
001018  980b              LDR      r0,[sp,#0x2c]
00101a  b900              CBNZ     r0,|L2.4126|
00101c  e017              B        |L2.4174|
                  |L2.4126|
00101e  9811              LDR      r0,[sp,#0x44]
001020  7880              LDRB     r0,[r0,#2]
001022  f0000103          AND      r1,r0,#3
001026  980b              LDR      r0,[sp,#0x2c]
001028  ea400081          ORR      r0,r0,r1,LSL #2
00102c  900b              STR      r0,[sp,#0x2c]
00102e  481a              LDR      r0,|L2.4248|
001030  3020              ADDS     r0,r0,#0x20
001032  990b              LDR      r1,[sp,#0x2c]
001034  5c40              LDRB     r0,[r0,r1]
001036  491d              LDR      r1,|L2.4268|
001038  f8311010          LDRH     r1,[r1,r0,LSL #1]
00103c  9811              LDR      r0,[sp,#0x44]
00103e  78c2              LDRB     r2,[r0,#3]
001040  980d              LDR      r0,[sp,#0x34]
001042  4410              ADD      r0,r0,r2
001044  3008              ADDS     r0,r0,#8
001046  4a1a              LDR      r2,|L2.4272|
001048  f8221010          STRH     r1,[r2,r0,LSL #1]
00104c  bf00              NOP      
                  |L2.4174|
00104e  980d              LDR      r0,[sp,#0x34]
001050  1e40              SUBS     r0,r0,#1
001052  900d              STR      r0,[sp,#0x34]
                  |L2.4180|
001054  e9dd100c          LDRD     r1,r0,[sp,#0x30]
001058  4288              CMP      r0,r1
00105a  daca              BGE      |L2.4082|
                  |L2.4188|
00105c  bf00              NOP      
                  |L2.4190|
00105e  e206              B        |L2.5230|
                  |L2.4192|
001060  480d              LDR      r0,|L2.4248|
001062  380c              SUBS     r0,r0,#0xc
001064  6880              LDR      r0,[r0,#8]  ; PPU_Mem
001066  900e              STR      r0,[sp,#0x38]
001068  9811              LDR      r0,[sp,#0x44]
00106a  7840              LDRB     r0,[r0,#1]
00106c  0100              LSLS     r0,r0,#4
00106e  900f              STR      r0,[sp,#0x3c]
001070  9812              LDR      r0,[sp,#0x48]
001072  f0000007          AND      r0,r0,#7
001076  9010              STR      r0,[sp,#0x40]
001078  2000              MOVS     r0,#0
00107a  b1d8              CBZ      r0,|L2.4276|
00107c  9811              LDR      r0,[sp,#0x44]
00107e  78c0              LDRB     r0,[r0,#3]
001080  2808              CMP      r0,#8
001082  da17              BGE      |L2.4276|
001084  9811              LDR      r0,[sp,#0x44]
001086  78c0              LDRB     r0,[r0,#3]
001088  f1c00008          RSB      r0,r0,#8
00108c  900c              STR      r0,[sp,#0x30]
00108e  980c              LDR      r0,[sp,#0x30]
001090  b990              CBNZ     r0,|L2.4280|
001092  e09a              B        |L2.4554|
                  |L2.4244|
                          DCD      Premapped_palette
                  |L2.4248|
                          DCD      PPU_Mem+0xc
                  |L2.4252|
                          DCD      PPU_BG_HScrlOrg
                  |L2.4256|
                          DCD      0x40020c00
                  |L2.4260|
                          DCD      PPU_Reg
                  |L2.4264|
                          DCD      sprite
                  |L2.4268|
                          DCD      NES_Color_Palette
                  |L2.4272|
                          DCD      Buffer_scanline
                  |L2.4276|
0010b4  2000              MOVS     r0,#0
0010b6  900c              STR      r0,[sp,#0x30]
                  |L2.4280|
0010b8  9811              LDR      r0,[sp,#0x44]
0010ba  7880              LDRB     r0,[r0,#2]
0010bc  f0000080          AND      r0,r0,#0x80
0010c0  b120              CBZ      r0,|L2.4300|
0010c2  9810              LDR      r0,[sp,#0x40]
0010c4  f1c00007          RSB      r0,r0,#7
0010c8  b2c0              UXTB     r0,r0
0010ca  9010              STR      r0,[sp,#0x40]
                  |L2.4300|
0010cc  e9dd010f          LDRD     r0,r1,[sp,#0x3c]
0010d0  4401              ADD      r1,r1,r0
0010d2  980e              LDR      r0,[sp,#0x38]
0010d4  5c40              LDRB     r0,[r0,r1]
0010d6  9009              STR      r0,[sp,#0x24]
0010d8  e9dd010f          LDRD     r0,r1,[sp,#0x3c]
0010dc  4408              ADD      r0,r0,r1
0010de  3008              ADDS     r0,r0,#8
0010e0  990e              LDR      r1,[sp,#0x38]
0010e2  5c08              LDRB     r0,[r1,r0]
0010e4  900a              STR      r0,[sp,#0x28]
0010e6  9811              LDR      r0,[sp,#0x44]
0010e8  7880              LDRB     r0,[r0,#2]
0010ea  f0000040          AND      r0,r0,#0x40
0010ee  b398              CBZ      r0,|L2.4440|
0010f0  2007              MOVS     r0,#7
0010f2  900d              STR      r0,[sp,#0x34]
0010f4  e02b              B        |L2.4430|
                  |L2.4342|
0010f6  990d              LDR      r1,[sp,#0x34]
0010f8  9809              LDR      r0,[sp,#0x24]
0010fa  4108              ASRS     r0,r0,r1
0010fc  f0000001          AND      r0,r0,#1
001100  900b              STR      r0,[sp,#0x2c]
001102  990d              LDR      r1,[sp,#0x34]
001104  980a              LDR      r0,[sp,#0x28]
001106  4108              ASRS     r0,r0,r1
001108  f0000101          AND      r1,r0,#1
00110c  980b              LDR      r0,[sp,#0x2c]
00110e  ea400041          ORR      r0,r0,r1,LSL #1
001112  900b              STR      r0,[sp,#0x2c]
001114  980b              LDR      r0,[sp,#0x2c]
001116  b900              CBNZ     r0,|L2.4378|
001118  e016              B        |L2.4424|
                  |L2.4378|
00111a  9811              LDR      r0,[sp,#0x44]
00111c  7880              LDRB     r0,[r0,#2]
00111e  f0000103          AND      r1,r0,#3
001122  980b              LDR      r0,[sp,#0x2c]
001124  ea400081          ORR      r0,r0,r1,LSL #2
001128  900b              STR      r0,[sp,#0x2c]
00112a  48f8              LDR      r0,|L2.5388|
00112c  990b              LDR      r1,[sp,#0x2c]
00112e  5c40              LDRB     r0,[r0,r1]
001130  49f7              LDR      r1,|L2.5392|
001132  f8311010          LDRH     r1,[r1,r0,LSL #1]
001136  9811              LDR      r0,[sp,#0x44]
001138  78c2              LDRB     r2,[r0,#3]
00113a  980d              LDR      r0,[sp,#0x34]
00113c  4410              ADD      r0,r0,r2
00113e  3008              ADDS     r0,r0,#8
001140  4af4              LDR      r2,|L2.5396|
001142  f8221010          STRH     r1,[r2,r0,LSL #1]
001146  bf00              NOP      
                  |L2.4424|
001148  980d              LDR      r0,[sp,#0x34]
00114a  1e40              SUBS     r0,r0,#1
00114c  900d              STR      r0,[sp,#0x34]
                  |L2.4430|
00114e  e9dd100c          LDRD     r1,r0,[sp,#0x30]
001152  4288              CMP      r0,r1
001154  dacf              BGE      |L2.4342|
001156  e037              B        |L2.4552|
                  |L2.4440|
001158  e7ff              B        |L2.4442|
                  |L2.4442|
00115a  2007              MOVS     r0,#7
00115c  900d              STR      r0,[sp,#0x34]
00115e  e02f              B        |L2.4544|
                  |L2.4448|
001160  980d              LDR      r0,[sp,#0x34]
001162  f1c00107          RSB      r1,r0,#7
001166  9809              LDR      r0,[sp,#0x24]
001168  4108              ASRS     r0,r0,r1
00116a  f0000001          AND      r0,r0,#1
00116e  900b              STR      r0,[sp,#0x2c]
001170  980d              LDR      r0,[sp,#0x34]
001172  f1c00107          RSB      r1,r0,#7
001176  980a              LDR      r0,[sp,#0x28]
001178  4108              ASRS     r0,r0,r1
00117a  f0000101          AND      r1,r0,#1
00117e  980b              LDR      r0,[sp,#0x2c]
001180  ea400041          ORR      r0,r0,r1,LSL #1
001184  900b              STR      r0,[sp,#0x2c]
001186  980b              LDR      r0,[sp,#0x2c]
001188  b900              CBNZ     r0,|L2.4492|
00118a  e016              B        |L2.4538|
                  |L2.4492|
00118c  9811              LDR      r0,[sp,#0x44]
00118e  7880              LDRB     r0,[r0,#2]
001190  f0000103          AND      r1,r0,#3
001194  980b              LDR      r0,[sp,#0x2c]
001196  ea400081          ORR      r0,r0,r1,LSL #2
00119a  900b              STR      r0,[sp,#0x2c]
00119c  48db              LDR      r0,|L2.5388|
00119e  990b              LDR      r1,[sp,#0x2c]
0011a0  5c40              LDRB     r0,[r0,r1]
0011a2  49db              LDR      r1,|L2.5392|
0011a4  f8311010          LDRH     r1,[r1,r0,LSL #1]
0011a8  9811              LDR      r0,[sp,#0x44]
0011aa  78c2              LDRB     r2,[r0,#3]
0011ac  980d              LDR      r0,[sp,#0x34]
0011ae  4410              ADD      r0,r0,r2
0011b0  3008              ADDS     r0,r0,#8
0011b2  4ad8              LDR      r2,|L2.5396|
0011b4  f8221010          STRH     r1,[r2,r0,LSL #1]
0011b8  bf00              NOP      
                  |L2.4538|
0011ba  980d              LDR      r0,[sp,#0x34]
0011bc  1e40              SUBS     r0,r0,#1
0011be  900d              STR      r0,[sp,#0x34]
                  |L2.4544|
0011c0  e9dd100c          LDRD     r1,r0,[sp,#0x30]
0011c4  4288              CMP      r0,r1
0011c6  dacb              BGE      |L2.4448|
                  |L2.4552|
0011c8  bf00              NOP      
                  |L2.4554|
0011ca  e150              B        |L2.5230|
                  |L2.4556|
0011cc  9812              LDR      r0,[sp,#0x48]
0011ce  2808              CMP      r0,#8
0011d0  da6b              BGE      |L2.4778|
0011d2  48ce              LDR      r0,|L2.5388|
0011d4  382c              SUBS     r0,r0,#0x2c
0011d6  6840              LDR      r0,[r0,#4]  ; PPU_Mem
0011d8  900e              STR      r0,[sp,#0x38]
0011da  9811              LDR      r0,[sp,#0x44]
0011dc  7840              LDRB     r0,[r0,#1]
0011de  0100              LSLS     r0,r0,#4
0011e0  900f              STR      r0,[sp,#0x3c]
0011e2  9812              LDR      r0,[sp,#0x48]
0011e4  b2c0              UXTB     r0,r0
0011e6  9010              STR      r0,[sp,#0x40]
0011e8  2000              MOVS     r0,#0
0011ea  b158              CBZ      r0,|L2.4612|
0011ec  9811              LDR      r0,[sp,#0x44]
0011ee  78c0              LDRB     r0,[r0,#3]
0011f0  2808              CMP      r0,#8
0011f2  da07              BGE      |L2.4612|
0011f4  9811              LDR      r0,[sp,#0x44]
0011f6  78c0              LDRB     r0,[r0,#3]
0011f8  f1c00008          RSB      r0,r0,#8
0011fc  900c              STR      r0,[sp,#0x30]
0011fe  980c              LDR      r0,[sp,#0x30]
001200  b910              CBNZ     r0,|L2.4616|
001202  e08b              B        |L2.4892|
                  |L2.4612|
001204  2000              MOVS     r0,#0
001206  900c              STR      r0,[sp,#0x30]
                  |L2.4616|
001208  9811              LDR      r0,[sp,#0x44]
00120a  7880              LDRB     r0,[r0,#2]
00120c  f0000080          AND      r0,r0,#0x80
001210  b120              CBZ      r0,|L2.4636|
001212  9810              LDR      r0,[sp,#0x40]
001214  f1c00007          RSB      r0,r0,#7
001218  b2c0              UXTB     r0,r0
00121a  9010              STR      r0,[sp,#0x40]
                  |L2.4636|
00121c  e9dd010f          LDRD     r0,r1,[sp,#0x3c]
001220  4401              ADD      r1,r1,r0
001222  980e              LDR      r0,[sp,#0x38]
001224  5c40              LDRB     r0,[r0,r1]
001226  9009              STR      r0,[sp,#0x24]
001228  e9dd010f          LDRD     r0,r1,[sp,#0x3c]
00122c  4408              ADD      r0,r0,r1
00122e  3008              ADDS     r0,r0,#8
001230  990e              LDR      r1,[sp,#0x38]
001232  5c08              LDRB     r0,[r1,r0]
001234  900a              STR      r0,[sp,#0x28]
001236  9811              LDR      r0,[sp,#0x44]
001238  7880              LDRB     r0,[r0,#2]
00123a  f0000040          AND      r0,r0,#0x40
00123e  b398              CBZ      r0,|L2.4776|
001240  2007              MOVS     r0,#7
001242  900d              STR      r0,[sp,#0x34]
001244  e02b              B        |L2.4766|
                  |L2.4678|
001246  990d              LDR      r1,[sp,#0x34]
001248  9809              LDR      r0,[sp,#0x24]
00124a  4108              ASRS     r0,r0,r1
00124c  f0000001          AND      r0,r0,#1
001250  900b              STR      r0,[sp,#0x2c]
001252  990d              LDR      r1,[sp,#0x34]
001254  980a              LDR      r0,[sp,#0x28]
001256  4108              ASRS     r0,r0,r1
001258  f0000101          AND      r1,r0,#1
00125c  980b              LDR      r0,[sp,#0x2c]
00125e  ea400041          ORR      r0,r0,r1,LSL #1
001262  900b              STR      r0,[sp,#0x2c]
001264  980b              LDR      r0,[sp,#0x2c]
001266  b900              CBNZ     r0,|L2.4714|
001268  e016              B        |L2.4760|
                  |L2.4714|
00126a  9811              LDR      r0,[sp,#0x44]
00126c  7880              LDRB     r0,[r0,#2]
00126e  f0000103          AND      r1,r0,#3
001272  980b              LDR      r0,[sp,#0x2c]
001274  ea400081          ORR      r0,r0,r1,LSL #2
001278  900b              STR      r0,[sp,#0x2c]
00127a  48a4              LDR      r0,|L2.5388|
00127c  990b              LDR      r1,[sp,#0x2c]
00127e  5c40              LDRB     r0,[r0,r1]
001280  49a3              LDR      r1,|L2.5392|
001282  f8311010          LDRH     r1,[r1,r0,LSL #1]
001286  9811              LDR      r0,[sp,#0x44]
001288  78c2              LDRB     r2,[r0,#3]
00128a  980d              LDR      r0,[sp,#0x34]
00128c  4410              ADD      r0,r0,r2
00128e  3008              ADDS     r0,r0,#8
001290  4aa0              LDR      r2,|L2.5396|
001292  f8221010          STRH     r1,[r2,r0,LSL #1]
001296  bf00              NOP      
                  |L2.4760|
001298  980d              LDR      r0,[sp,#0x34]
00129a  1e40              SUBS     r0,r0,#1
00129c  900d              STR      r0,[sp,#0x34]
                  |L2.4766|
00129e  e9dd100c          LDRD     r1,r0,[sp,#0x30]
0012a2  4288              CMP      r0,r1
0012a4  dacf              BGE      |L2.4678|
0012a6  e038              B        |L2.4890|
                  |L2.4776|
0012a8  e000              B        |L2.4780|
                  |L2.4778|
0012aa  e038              B        |L2.4894|
                  |L2.4780|
0012ac  2007              MOVS     r0,#7
0012ae  900d              STR      r0,[sp,#0x34]
0012b0  e02f              B        |L2.4882|
                  |L2.4786|
0012b2  980d              LDR      r0,[sp,#0x34]
0012b4  f1c00107          RSB      r1,r0,#7
0012b8  9809              LDR      r0,[sp,#0x24]
0012ba  4108              ASRS     r0,r0,r1
0012bc  f0000001          AND      r0,r0,#1
0012c0  900b              STR      r0,[sp,#0x2c]
0012c2  980d              LDR      r0,[sp,#0x34]
0012c4  f1c00107          RSB      r1,r0,#7
0012c8  980a              LDR      r0,[sp,#0x28]
0012ca  4108              ASRS     r0,r0,r1
0012cc  f0000101          AND      r1,r0,#1
0012d0  980b              LDR      r0,[sp,#0x2c]
0012d2  ea400041          ORR      r0,r0,r1,LSL #1
0012d6  900b              STR      r0,[sp,#0x2c]
0012d8  980b              LDR      r0,[sp,#0x2c]
0012da  b900              CBNZ     r0,|L2.4830|
0012dc  e016              B        |L2.4876|
                  |L2.4830|
0012de  9811              LDR      r0,[sp,#0x44]
0012e0  7880              LDRB     r0,[r0,#2]
0012e2  f0000103          AND      r1,r0,#3
0012e6  980b              LDR      r0,[sp,#0x2c]
0012e8  ea400081          ORR      r0,r0,r1,LSL #2
0012ec  900b              STR      r0,[sp,#0x2c]
0012ee  4887              LDR      r0,|L2.5388|
0012f0  990b              LDR      r1,[sp,#0x2c]
0012f2  5c40              LDRB     r0,[r0,r1]
0012f4  4986              LDR      r1,|L2.5392|
0012f6  f8311010          LDRH     r1,[r1,r0,LSL #1]
0012fa  9811              LDR      r0,[sp,#0x44]
0012fc  78c2              LDRB     r2,[r0,#3]
0012fe  980d              LDR      r0,[sp,#0x34]
001300  4410              ADD      r0,r0,r2
001302  3008              ADDS     r0,r0,#8
001304  4a83              LDR      r2,|L2.5396|
001306  f8221010          STRH     r1,[r2,r0,LSL #1]
00130a  bf00              NOP      
                  |L2.4876|
00130c  980d              LDR      r0,[sp,#0x34]
00130e  1e40              SUBS     r0,r0,#1
001310  900d              STR      r0,[sp,#0x34]
                  |L2.4882|
001312  e9dd100c          LDRD     r1,r0,[sp,#0x30]
001316  4288              CMP      r0,r1
001318  dacb              BGE      |L2.4786|
                  |L2.4890|
00131a  bf00              NOP      
                  |L2.4892|
00131c  e0a7              B        |L2.5230|
                  |L2.4894|
00131e  487b              LDR      r0,|L2.5388|
001320  382c              SUBS     r0,r0,#0x2c
001322  6840              LDR      r0,[r0,#4]  ; PPU_Mem
001324  900e              STR      r0,[sp,#0x38]
001326  9811              LDR      r0,[sp,#0x44]
001328  7840              LDRB     r0,[r0,#1]
00132a  f0400001          ORR      r0,r0,#1
00132e  0100              LSLS     r0,r0,#4
001330  900f              STR      r0,[sp,#0x3c]
001332  9812              LDR      r0,[sp,#0x48]
001334  f0000007          AND      r0,r0,#7
001338  9010              STR      r0,[sp,#0x40]
00133a  2000              MOVS     r0,#0
00133c  b158              CBZ      r0,|L2.4950|
00133e  9811              LDR      r0,[sp,#0x44]
001340  78c0              LDRB     r0,[r0,#3]
001342  2808              CMP      r0,#8
001344  da07              BGE      |L2.4950|
001346  9811              LDR      r0,[sp,#0x44]
001348  78c0              LDRB     r0,[r0,#3]
00134a  f1c00008          RSB      r0,r0,#8
00134e  900c              STR      r0,[sp,#0x30]
001350  980c              LDR      r0,[sp,#0x30]
001352  b910              CBNZ     r0,|L2.4954|
001354  e08a              B        |L2.5228|
                  |L2.4950|
001356  2000              MOVS     r0,#0
001358  900c              STR      r0,[sp,#0x30]
                  |L2.4954|
00135a  9811              LDR      r0,[sp,#0x44]
00135c  7880              LDRB     r0,[r0,#2]
00135e  f0000080          AND      r0,r0,#0x80
001362  b120              CBZ      r0,|L2.4974|
001364  9810              LDR      r0,[sp,#0x40]
001366  f1c00007          RSB      r0,r0,#7
00136a  b2c0              UXTB     r0,r0
00136c  9010              STR      r0,[sp,#0x40]
                  |L2.4974|
00136e  e9dd010f          LDRD     r0,r1,[sp,#0x3c]
001372  4401              ADD      r1,r1,r0
001374  980e              LDR      r0,[sp,#0x38]
001376  5c40              LDRB     r0,[r0,r1]
001378  9009              STR      r0,[sp,#0x24]
00137a  e9dd010f          LDRD     r0,r1,[sp,#0x3c]
00137e  4408              ADD      r0,r0,r1
001380  3008              ADDS     r0,r0,#8
001382  990e              LDR      r1,[sp,#0x38]
001384  5c08              LDRB     r0,[r1,r0]
001386  900a              STR      r0,[sp,#0x28]
001388  9811              LDR      r0,[sp,#0x44]
00138a  7880              LDRB     r0,[r0,#2]
00138c  f0000040          AND      r0,r0,#0x40
001390  b398              CBZ      r0,|L2.5114|
001392  2007              MOVS     r0,#7
001394  900d              STR      r0,[sp,#0x34]
001396  e02b              B        |L2.5104|
                  |L2.5016|
001398  990d              LDR      r1,[sp,#0x34]
00139a  9809              LDR      r0,[sp,#0x24]
00139c  4108              ASRS     r0,r0,r1
00139e  f0000001          AND      r0,r0,#1
0013a2  900b              STR      r0,[sp,#0x2c]
0013a4  990d              LDR      r1,[sp,#0x34]
0013a6  980a              LDR      r0,[sp,#0x28]
0013a8  4108              ASRS     r0,r0,r1
0013aa  f0000101          AND      r1,r0,#1
0013ae  980b              LDR      r0,[sp,#0x2c]
0013b0  ea400041          ORR      r0,r0,r1,LSL #1
0013b4  900b              STR      r0,[sp,#0x2c]
0013b6  980b              LDR      r0,[sp,#0x2c]
0013b8  b900              CBNZ     r0,|L2.5052|
0013ba  e016              B        |L2.5098|
                  |L2.5052|
0013bc  9811              LDR      r0,[sp,#0x44]
0013be  7880              LDRB     r0,[r0,#2]
0013c0  f0000103          AND      r1,r0,#3
0013c4  980b              LDR      r0,[sp,#0x2c]
0013c6  ea400081          ORR      r0,r0,r1,LSL #2
0013ca  900b              STR      r0,[sp,#0x2c]
0013cc  484f              LDR      r0,|L2.5388|
0013ce  990b              LDR      r1,[sp,#0x2c]
0013d0  5c40              LDRB     r0,[r0,r1]
0013d2  494f              LDR      r1,|L2.5392|
0013d4  f8311010          LDRH     r1,[r1,r0,LSL #1]
0013d8  9811              LDR      r0,[sp,#0x44]
0013da  78c2              LDRB     r2,[r0,#3]
0013dc  980d              LDR      r0,[sp,#0x34]
0013de  4410              ADD      r0,r0,r2
0013e0  3008              ADDS     r0,r0,#8
0013e2  4a4c              LDR      r2,|L2.5396|
0013e4  f8221010          STRH     r1,[r2,r0,LSL #1]
0013e8  bf00              NOP      
                  |L2.5098|
0013ea  980d              LDR      r0,[sp,#0x34]
0013ec  1e40              SUBS     r0,r0,#1
0013ee  900d              STR      r0,[sp,#0x34]
                  |L2.5104|
0013f0  e9dd100c          LDRD     r1,r0,[sp,#0x30]
0013f4  4288              CMP      r0,r1
0013f6  dacf              BGE      |L2.5016|
0013f8  e037              B        |L2.5226|
                  |L2.5114|
0013fa  e7ff              B        |L2.5116|
                  |L2.5116|
0013fc  2007              MOVS     r0,#7
0013fe  900d              STR      r0,[sp,#0x34]
001400  e02f              B        |L2.5218|
                  |L2.5122|
001402  980d              LDR      r0,[sp,#0x34]
001404  f1c00107          RSB      r1,r0,#7
001408  9809              LDR      r0,[sp,#0x24]
00140a  4108              ASRS     r0,r0,r1
00140c  f0000001          AND      r0,r0,#1
001410  900b              STR      r0,[sp,#0x2c]
001412  980d              LDR      r0,[sp,#0x34]
001414  f1c00107          RSB      r1,r0,#7
001418  980a              LDR      r0,[sp,#0x28]
00141a  4108              ASRS     r0,r0,r1
00141c  f0000101          AND      r1,r0,#1
001420  980b              LDR      r0,[sp,#0x2c]
001422  ea400041          ORR      r0,r0,r1,LSL #1
001426  900b              STR      r0,[sp,#0x2c]
001428  980b              LDR      r0,[sp,#0x2c]
00142a  b900              CBNZ     r0,|L2.5166|
00142c  e016              B        |L2.5212|
                  |L2.5166|
00142e  9811              LDR      r0,[sp,#0x44]
001430  7880              LDRB     r0,[r0,#2]
001432  f0000103          AND      r1,r0,#3
001436  980b              LDR      r0,[sp,#0x2c]
001438  ea400081          ORR      r0,r0,r1,LSL #2
00143c  900b              STR      r0,[sp,#0x2c]
00143e  4833              LDR      r0,|L2.5388|
001440  990b              LDR      r1,[sp,#0x2c]
001442  5c40              LDRB     r0,[r0,r1]
001444  4932              LDR      r1,|L2.5392|
001446  f8311010          LDRH     r1,[r1,r0,LSL #1]
00144a  9811              LDR      r0,[sp,#0x44]
00144c  78c2              LDRB     r2,[r0,#3]
00144e  980d              LDR      r0,[sp,#0x34]
001450  4410              ADD      r0,r0,r2
001452  3008              ADDS     r0,r0,#8
001454  4a2f              LDR      r2,|L2.5396|
001456  f8221010          STRH     r1,[r2,r0,LSL #1]
00145a  bf00              NOP      
                  |L2.5212|
00145c  980d              LDR      r0,[sp,#0x34]
00145e  1e40              SUBS     r0,r0,#1
001460  900d              STR      r0,[sp,#0x34]
                  |L2.5218|
001462  e9dd100c          LDRD     r1,r0,[sp,#0x30]
001466  4288              CMP      r0,r1
001468  dacb              BGE      |L2.5122|
                  |L2.5226|
00146a  bf00              NOP      
                  |L2.5228|
00146c  bf00              NOP      
                  |L2.5230|
00146e  bf00              NOP      
001470  e0c2              B        |L2.5624|
                  |L2.5234|
;;;500                    }else{ 
;;;501                        render_sprite_88(&sprite[i], dy_axes);   
001472  4829              LDR      r0,|L2.5400|
001474  6801              LDR      r1,[r0,#0]  ; sprite
001476  9819              LDR      r0,[sp,#0x64]
001478  eb010080          ADD      r0,r1,r0,LSL #2
00147c  9011              STR      r0,[sp,#0x44]
00147e  9817              LDR      r0,[sp,#0x5c]
001480  9012              STR      r0,[sp,#0x48]
001482  4826              LDR      r0,|L2.5404|
001484  7800              LDRB     r0,[r0,#0]  ; PPU_Reg
001486  f0000008          AND      r0,r0,#8
00148a  b118              CBZ      r0,|L2.5268|
00148c  481f              LDR      r0,|L2.5388|
00148e  382c              SUBS     r0,r0,#0x2c
001490  6880              LDR      r0,[r0,#8]  ; PPU_Mem
001492  e002              B        |L2.5274|
                  |L2.5268|
001494  481d              LDR      r0,|L2.5388|
001496  382c              SUBS     r0,r0,#0x2c
001498  6840              LDR      r0,[r0,#4]  ; PPU_Mem
                  |L2.5274|
00149a  9010              STR      r0,[sp,#0x40]
00149c  9810              LDR      r0,[sp,#0x40]
00149e  900d              STR      r0,[sp,#0x34]
0014a0  9811              LDR      r0,[sp,#0x44]
0014a2  7840              LDRB     r0,[r0,#1]
0014a4  0100              LSLS     r0,r0,#4
0014a6  900e              STR      r0,[sp,#0x38]
0014a8  9812              LDR      r0,[sp,#0x48]
0014aa  b2c0              UXTB     r0,r0
0014ac  900f              STR      r0,[sp,#0x3c]
0014ae  2000              MOVS     r0,#0
0014b0  b158              CBZ      r0,|L2.5322|
0014b2  9811              LDR      r0,[sp,#0x44]
0014b4  78c0              LDRB     r0,[r0,#3]
0014b6  2808              CMP      r0,#8
0014b8  da07              BGE      |L2.5322|
0014ba  9811              LDR      r0,[sp,#0x44]
0014bc  78c0              LDRB     r0,[r0,#3]
0014be  f1c00008          RSB      r0,r0,#8
0014c2  900b              STR      r0,[sp,#0x2c]
0014c4  980b              LDR      r0,[sp,#0x2c]
0014c6  b910              CBNZ     r0,|L2.5326|
0014c8  e094              B        |L2.5620|
                  |L2.5322|
0014ca  2000              MOVS     r0,#0
0014cc  900b              STR      r0,[sp,#0x2c]
                  |L2.5326|
0014ce  9811              LDR      r0,[sp,#0x44]
0014d0  7880              LDRB     r0,[r0,#2]
0014d2  f0000080          AND      r0,r0,#0x80
0014d6  b120              CBZ      r0,|L2.5346|
0014d8  980f              LDR      r0,[sp,#0x3c]
0014da  f1c00007          RSB      r0,r0,#7
0014de  b2c0              UXTB     r0,r0
0014e0  900f              STR      r0,[sp,#0x3c]
                  |L2.5346|
0014e2  e9dd010e          LDRD     r0,r1,[sp,#0x38]
0014e6  4401              ADD      r1,r1,r0
0014e8  980d              LDR      r0,[sp,#0x34]
0014ea  5c40              LDRB     r0,[r0,r1]
0014ec  9008              STR      r0,[sp,#0x20]
0014ee  e9dd010e          LDRD     r0,r1,[sp,#0x38]
0014f2  4408              ADD      r0,r0,r1
0014f4  3008              ADDS     r0,r0,#8
0014f6  990d              LDR      r1,[sp,#0x34]
0014f8  5c08              LDRB     r0,[r1,r0]
0014fa  9009              STR      r0,[sp,#0x24]
0014fc  9811              LDR      r0,[sp,#0x44]
0014fe  7880              LDRB     r0,[r0,#2]
001500  f0000040          AND      r0,r0,#0x40
001504  b3e8              CBZ      r0,|L2.5506|
001506  2007              MOVS     r0,#7
001508  900c              STR      r0,[sp,#0x30]
00150a  e035              B        |L2.5496|
                  |L2.5388|
                          DCD      PPU_Mem+0x2c
                  |L2.5392|
                          DCD      NES_Color_Palette
                  |L2.5396|
                          DCD      Buffer_scanline
                  |L2.5400|
                          DCD      sprite
                  |L2.5404|
                          DCD      PPU_Reg
                  |L2.5408|
001520  990c              LDR      r1,[sp,#0x30]
001522  9808              LDR      r0,[sp,#0x20]
001524  4108              ASRS     r0,r0,r1
001526  f0000001          AND      r0,r0,#1
00152a  900a              STR      r0,[sp,#0x28]
00152c  990c              LDR      r1,[sp,#0x30]
00152e  9809              LDR      r0,[sp,#0x24]
001530  4108              ASRS     r0,r0,r1
001532  f0000101          AND      r1,r0,#1
001536  980a              LDR      r0,[sp,#0x28]
001538  ea400041          ORR      r0,r0,r1,LSL #1
00153c  900a              STR      r0,[sp,#0x28]
00153e  980a              LDR      r0,[sp,#0x28]
001540  b900              CBNZ     r0,|L2.5444|
001542  e016              B        |L2.5490|
                  |L2.5444|
001544  9811              LDR      r0,[sp,#0x44]
001546  7880              LDRB     r0,[r0,#2]
001548  f0000103          AND      r1,r0,#3
00154c  980a              LDR      r0,[sp,#0x28]
00154e  ea400081          ORR      r0,r0,r1,LSL #2
001552  900a              STR      r0,[sp,#0x28]
001554  4847              LDR      r0,|L2.5748|
001556  990a              LDR      r1,[sp,#0x28]
001558  5c40              LDRB     r0,[r0,r1]
00155a  4947              LDR      r1,|L2.5752|
00155c  f8311010          LDRH     r1,[r1,r0,LSL #1]
001560  9811              LDR      r0,[sp,#0x44]
001562  78c2              LDRB     r2,[r0,#3]
001564  980c              LDR      r0,[sp,#0x30]
001566  4410              ADD      r0,r0,r2
001568  3008              ADDS     r0,r0,#8
00156a  4a44              LDR      r2,|L2.5756|
00156c  f8221010          STRH     r1,[r2,r0,LSL #1]
001570  bf00              NOP      
                  |L2.5490|
001572  980c              LDR      r0,[sp,#0x30]
001574  1e40              SUBS     r0,r0,#1
001576  900c              STR      r0,[sp,#0x30]
                  |L2.5496|
001578  e9dd100b          LDRD     r1,r0,[sp,#0x2c]
00157c  4288              CMP      r0,r1
00157e  dacf              BGE      |L2.5408|
001580  e037              B        |L2.5618|
                  |L2.5506|
001582  e7ff              B        |L2.5508|
                  |L2.5508|
001584  2007              MOVS     r0,#7
001586  900c              STR      r0,[sp,#0x30]
001588  e02f              B        |L2.5610|
                  |L2.5514|
00158a  980c              LDR      r0,[sp,#0x30]
00158c  f1c00107          RSB      r1,r0,#7
001590  9808              LDR      r0,[sp,#0x20]
001592  4108              ASRS     r0,r0,r1
001594  f0000001          AND      r0,r0,#1
001598  900a              STR      r0,[sp,#0x28]
00159a  980c              LDR      r0,[sp,#0x30]
00159c  f1c00107          RSB      r1,r0,#7
0015a0  9809              LDR      r0,[sp,#0x24]
0015a2  4108              ASRS     r0,r0,r1
0015a4  f0000101          AND      r1,r0,#1
0015a8  980a              LDR      r0,[sp,#0x28]
0015aa  ea400041          ORR      r0,r0,r1,LSL #1
0015ae  900a              STR      r0,[sp,#0x28]
0015b0  980a              LDR      r0,[sp,#0x28]
0015b2  b900              CBNZ     r0,|L2.5558|
0015b4  e016              B        |L2.5604|
                  |L2.5558|
0015b6  9811              LDR      r0,[sp,#0x44]
0015b8  7880              LDRB     r0,[r0,#2]
0015ba  f0000103          AND      r1,r0,#3
0015be  980a              LDR      r0,[sp,#0x28]
0015c0  ea400081          ORR      r0,r0,r1,LSL #2
0015c4  900a              STR      r0,[sp,#0x28]
0015c6  482b              LDR      r0,|L2.5748|
0015c8  990a              LDR      r1,[sp,#0x28]
0015ca  5c40              LDRB     r0,[r0,r1]
0015cc  492a              LDR      r1,|L2.5752|
0015ce  f8311010          LDRH     r1,[r1,r0,LSL #1]
0015d2  9811              LDR      r0,[sp,#0x44]
0015d4  78c2              LDRB     r2,[r0,#3]
0015d6  980c              LDR      r0,[sp,#0x30]
0015d8  4410              ADD      r0,r0,r2
0015da  3008              ADDS     r0,r0,#8
0015dc  4a27              LDR      r2,|L2.5756|
0015de  f8221010          STRH     r1,[r2,r0,LSL #1]
0015e2  bf00              NOP      
                  |L2.5604|
0015e4  980c              LDR      r0,[sp,#0x30]
0015e6  1e40              SUBS     r0,r0,#1
0015e8  900c              STR      r0,[sp,#0x30]
                  |L2.5610|
0015ea  e9dd100b          LDRD     r1,r0,[sp,#0x2c]
0015ee  4288              CMP      r0,r1
0015f0  dacb              BGE      |L2.5514|
                  |L2.5618|
0015f2  bf00              NOP      
                  |L2.5620|
0015f4  bf00              NOP      
0015f6  bf00              NOP      
                  |L2.5624|
0015f8  bf00              NOP                            ;490
                  |L2.5626|
0015fa  9819              LDR      r0,[sp,#0x64]         ;489
0015fc  1e40              SUBS     r0,r0,#1              ;489
0015fe  9019              STR      r0,[sp,#0x64]         ;489
                  |L2.5632|
001600  9819              LDR      r0,[sp,#0x64]         ;489
001602  2800              CMP      r0,#0                 ;489
001604  f6bfac3f          BGE      |L2.3718|
                  |L2.5640|
001608  bf00              NOP                            ;496
                  |L2.5642|
;;;502                    }   
;;;503                }      
;;;504            }
;;;505    
;;;506            //uint64_t* ptr = (void*)&Buffer_scanline[4]; //Should be 8?
;;;507            //uint64_t* end = (void*)&Buffer_scanline[4+256];
;;;508            //uint64_t* out = (void*)&DisplayBuffer[y_axes*256];
;;;509    				uint16_t* ptr = (void*)&Buffer_scanline[4]; //Should be 8?			
00160a  481c              LDR      r0,|L2.5756|
00160c  3008              ADDS     r0,r0,#8
00160e  9015              STR      r0,[sp,#0x54]
;;;510    				uint16_t* end = (void*)&Buffer_scanline[4+256];
001610  f5007000          ADD      r0,r0,#0x200
001614  9014              STR      r0,[sp,#0x50]
;;;511    				uint16_t* out = (void*)&DisplayBuffer[y_axes*256];
001616  491a              LDR      r1,|L2.5760|
001618  981a              LDR      r0,[sp,#0x68]
00161a  eb012040          ADD      r0,r1,r0,LSL #9
00161e  9013              STR      r0,[sp,#0x4c]
;;;512            while (ptr != end) {
001620  e009              B        |L2.5686|
                  |L2.5666|
;;;513                *out++ = *ptr++;
001622  9815              LDR      r0,[sp,#0x54]
001624  8801              LDRH     r1,[r0,#0]
001626  9813              LDR      r0,[sp,#0x4c]
001628  8001              STRH     r1,[r0,#0]
00162a  9815              LDR      r0,[sp,#0x54]
00162c  1c80              ADDS     r0,r0,#2
00162e  9015              STR      r0,[sp,#0x54]
001630  9813              LDR      r0,[sp,#0x4c]
001632  1c80              ADDS     r0,r0,#2
001634  9013              STR      r0,[sp,#0x4c]
                  |L2.5686|
001636  e9dd1014          LDRD     r1,r0,[sp,#0x50]      ;512
00163a  4288              CMP      r0,r1                 ;512
00163c  d1f1              BNE      |L2.5666|
;;;514            } 
;;;515        }else{   
00163e  e016              B        |L2.5742|
                  |L2.5696|
;;;516            // for(i=8; i<264; i++){   
;;;517            //     Buffer_scanline[i] = 0;        
;;;518            // }
;;;519            uint64_t* out = (void*)&DisplayBuffer[y_axes*256];
001640  490f              LDR      r1,|L2.5760|
001642  981a              LDR      r0,[sp,#0x68]
001644  eb012040          ADD      r0,r1,r0,LSL #9
001648  9016              STR      r0,[sp,#0x58]
;;;520            uint64_t* end = (void*)&DisplayBuffer[(y_axes+1)*256];
00164a  981a              LDR      r0,[sp,#0x68]
00164c  1c40              ADDS     r0,r0,#1
00164e  eb012040          ADD      r0,r1,r0,LSL #9
001652  9015              STR      r0,[sp,#0x54]
;;;521            while (out != end) {
001654  e006              B        |L2.5732|
                  |L2.5718|
;;;522                *out++ = 0;
001656  2200              MOVS     r2,#0
001658  9816              LDR      r0,[sp,#0x58]
00165a  6002              STR      r2,[r0,#0]
00165c  6042              STR      r2,[r0,#4]
00165e  9816              LDR      r0,[sp,#0x58]
001660  3008              ADDS     r0,r0,#8
001662  9016              STR      r0,[sp,#0x58]
                  |L2.5732|
001664  e9dd1015          LDRD     r1,r0,[sp,#0x54]      ;521
001668  4288              CMP      r0,r1                 ;521
00166a  d1f4              BNE      |L2.5718|
;;;523            }    
;;;524        }   
00166c  bf00              NOP      
                  |L2.5742|
;;;525    
;;;526        // for (int i=0; i<256; i++) { \
;;;527        //     DisplayBuffer[(y_axes)*256 + i] = Buffer_scanline[8+i]; \
;;;528        // } 
;;;529    
;;;530    }
00166e  b01b              ADD      sp,sp,#0x6c
001670  bd00              POP      {pc}
;;;531       
                          ENDP

001672  0000              DCW      0x0000
                  |L2.5748|
                          DCD      PPU_Mem+0x2c
                  |L2.5752|
                          DCD      NES_Color_Palette
                  |L2.5756|
                          DCD      Buffer_scanline
                  |L2.5760|
                          DCD      DisplayBuffer

                          AREA ||i.ppu_spr0_hit_flag||, CODE, READONLY, ALIGN=2

                  ppu_spr0_hit_flag PROC
;;;137       
;;;138    void ppu_spr0_hit_flag(int y_axes)   
000000  e92d4ff1          PUSH     {r0,r4-r11,lr}
;;;139    {   
000004  b085              SUB      sp,sp,#0x14
;;;140        int   i,y_scroll, dy_axes, dx_axes;   
;;;141        uint8_t y_TitleLine, x_TitleLine;   
;;;142        uint8_t spr_size, Spr0_Data, temp;   
;;;143        uint8_t nNameTable, BG_TitlePatNum;   
;;;144        uint8_t BG_Data0, BG_Data1, BG_Data;   
;;;145        uint16_t title_addr;   
;;;146        const uint8_t *BG_Patterntable;   
;;;147        const uint8_t *Spr_Patterntable;   
;;;148       
;;;149        spr_size = PPU_Reg.R0 & R0_SPR_SIZE ? 0x0F : 0x07;       
000006  f8dfb2a8          LDR      r11,|L3.688|
00000a  f89bb000          LDRB     r11,[r11,#0]  ; PPU_Reg
00000e  f00b0b20          AND      r11,r11,#0x20
000012  f1bb0f00          CMP      r11,#0
000016  d002              BEQ      |L3.30|
000018  f04f0b0f          MOV      r11,#0xf
00001c  e001              B        |L3.34|
                  |L3.30|
00001e  f04f0b07          MOV      r11,#7
                  |L3.34|
000022  f8cdb00c          STR      r11,[sp,#0xc]
;;;150        dy_axes = y_axes - (uint8_t)(sprite[0].y + 1);            
000026  f8dfb28c          LDR      r11,|L3.692|
00002a  f8dbb000          LDR      r11,[r11,#0]  ; sprite
00002e  f89bb000          LDRB     r11,[r11,#0]
000032  f10b0b01          ADD      r11,r11,#1
000036  f00b0eff          AND      lr,r11,#0xff
00003a  f8ddb014          LDR      r11,[sp,#0x14]
00003e  ebab000e          SUB      r0,r11,lr
;;;151        if(dy_axes != (dy_axes & spr_size))            
000042  f8ddb00c          LDR      r11,[sp,#0xc]
000046  ea000b0b          AND      r11,r0,r11
00004a  4583              CMP      r11,r0
00004c  d002              BEQ      |L3.84|
                  |L3.78|
;;;152            return;   
;;;153       
;;;154        nNameTable = PPU_Reg.R0 & R0_NAME_TABLE;   
;;;155        BG_Patterntable = PPU_Reg.R0 & BG_PATTERN_ADDR ? PPU_Mem.patterntable1 : PPU_Mem.patterntable0; 
;;;156        y_scroll = y_axes + PPU_BG_VScrlOrg;    
;;;157        if(y_scroll > 239){   
;;;158            y_scroll -= 240;   
;;;159            nNameTable ^= NAME_TABLE_V_MASK;        
;;;160        }   
;;;161        y_TitleLine = y_scroll >> 3;             
;;;162        x_TitleLine = (PPU_BG_HScrlOrg + sprite[0].x) >> 3;
;;;163        dy_axes = y_scroll & 0x07; 
;;;164        dx_axes = PPU_BG_HScrlOrg & 0x07;
;;;165        if(x_TitleLine > 31)
;;;166            nNameTable ^= NAME_TABLE_H_MASK;   
;;;167        BG_TitlePatNum = PPU_Mem.name_table[nNameTable][(y_TitleLine << 5) + x_TitleLine]; 
;;;168        BG_Data0  = BG_Patterntable[(BG_TitlePatNum << 4) + dy_axes];
;;;169        BG_Data0 |= BG_Patterntable[(BG_TitlePatNum << 4) + dy_axes + 8];   
;;;170        if((x_TitleLine + 1) > 31)
;;;171            nNameTable ^= NAME_TABLE_H_MASK;   
;;;172        BG_TitlePatNum = PPU_Mem.name_table[nNameTable][(y_TitleLine << 5) + x_TitleLine + 1];
;;;173        BG_Data1  = BG_Patterntable[(BG_TitlePatNum << 4) + dy_axes];
;;;174        BG_Data1 |= BG_Patterntable[(BG_TitlePatNum << 4) + dy_axes + 8];   
;;;175        BG_Data = (BG_Data0 << dx_axes) | (BG_Data1 >> dx_axes); 
;;;176    
;;;177        if(sprite[0].attr & SPR_VFLIP)
;;;178            dy_axes = spr_size - dy_axes;                          
;;;179        if(PPU_Reg.R2 & R0_SPR_SIZE){//8*16
;;;180            Spr_Patterntable = (sprite[0].t_num & 0x01) ? PPU_Mem.patterntable1 : PPU_Mem.patterntable0;   
;;;181            title_addr = (sprite[0].t_num & 0XFE) << 4;
;;;182            Spr0_Data  = Spr_Patterntable[title_addr + dy_axes];   
;;;183            Spr0_Data |= Spr_Patterntable[title_addr + dy_axes + 8];   
;;;184        }else{                      //8*8   
;;;185            Spr_Patterntable = (PPU_Reg.R0 & SPR_PATTERN_ADDR)  ? PPU_Mem.patterntable1 : PPU_Mem.patterntable0;   
;;;186            title_addr = sprite[0].t_num  << 4; 
;;;187            Spr0_Data  = Spr_Patterntable[title_addr + dy_axes];   
;;;188            Spr0_Data |= Spr_Patterntable[title_addr + dy_axes + 8];   
;;;189        }   
;;;190       
;;;191        if(sprite[0].attr & SPR_HFLIP){  
;;;192            temp = 0;   
;;;193            for(i=0; i<8; i++){   
;;;194                temp |= (Spr0_Data >> i) & 1;   
;;;195                temp <<= i;   
;;;196            }   
;;;197            Spr0_Data = temp;   
;;;198        }   
;;;199        if(Spr0_Data & BG_Data){   
;;;200            SpriteHitFlag = TRUE;   
;;;201        }    
;;;202    } 
00004e  b006              ADD      sp,sp,#0x18
000050  e8bd8ff0          POP      {r4-r11,pc}
                  |L3.84|
000054  f8dfb258          LDR      r11,|L3.688|
000058  f89bb000          LDRB     r11,[r11,#0]          ;154  ; PPU_Reg
00005c  f00b0103          AND      r1,r11,#3             ;154
000060  f8dfb24c          LDR      r11,|L3.688|
000064  f89bb000          LDRB     r11,[r11,#0]          ;155  ; PPU_Reg
000068  f00b0b10          AND      r11,r11,#0x10         ;155
00006c  f1bb0f00          CMP      r11,#0                ;155
000070  d004              BEQ      |L3.124|
000072  f8dfb244          LDR      r11,|L3.696|
000076  f8dbb008          LDR      r11,[r11,#8]          ;155  ; PPU_Mem
00007a  e003              B        |L3.132|
                  |L3.124|
00007c  f8dfb238          LDR      r11,|L3.696|
000080  f8dbb004          LDR      r11,[r11,#4]          ;155  ; PPU_Mem
                  |L3.132|
000084  46d8              MOV      r8,r11                ;155
000086  f8dfe234          LDR      lr,|L3.700|
00008a  f89ee000          LDRB     lr,[lr,#0]            ;156  ; PPU_BG_VScrlOrg
00008e  f8ddb014          LDR      r11,[sp,#0x14]        ;156
000092  eb0b040e          ADD      r4,r11,lr             ;156
000096  2cef              CMP      r4,#0xef              ;157
000098  dd02              BLE      |L3.160|
00009a  3cf0              SUBS     r4,r4,#0xf0           ;158
00009c  f0810102          EOR      r1,r1,#2              ;159
                  |L3.160|
0000a0  f3c40bc7          UBFX     r11,r4,#3,#8          ;161
0000a4  f8cdb010          STR      r11,[sp,#0x10]        ;161
0000a8  f8dfb208          LDR      r11,|L3.692|
0000ac  f8dbb000          LDR      r11,[r11,#0]          ;162  ; sprite
0000b0  f89bb003          LDRB     r11,[r11,#3]          ;162
0000b4  f8dfe208          LDR      lr,|L3.704|
0000b8  f89ee000          LDRB     lr,[lr,#0]            ;162  ; PPU_BG_HScrlOrg
0000bc  44f3              ADD      r11,r11,lr            ;162
0000be  ea4f05eb          ASR      r5,r11,#3             ;162
0000c2  f0040007          AND      r0,r4,#7              ;163
0000c6  f8dfb1f8          LDR      r11,|L3.704|
0000ca  f89bb000          LDRB     r11,[r11,#0]          ;164  ; PPU_BG_HScrlOrg
0000ce  f00b0a07          AND      r10,r11,#7            ;164
0000d2  2d1f              CMP      r5,#0x1f              ;165
0000d4  dd01              BLE      |L3.218|
0000d6  f0810101          EOR      r1,r1,#1              ;166
                  |L3.218|
0000da  f8dfb1dc          LDR      r11,|L3.696|
0000de  f10b0b0c          ADD      r11,r11,#0xc          ;167
0000e2  f85be021          LDR      lr,[r11,r1,LSL #2]    ;167
0000e6  f8ddb010          LDR      r11,[sp,#0x10]        ;167
0000ea  eb051b4b          ADD      r11,r5,r11,LSL #5     ;167
0000ee  f81e600b          LDRB     r6,[lr,r11]           ;167
0000f2  eb001b06          ADD      r11,r0,r6,LSL #4      ;168
0000f6  f818b00b          LDRB     r11,[r8,r11]          ;168
0000fa  f8cdb008          STR      r11,[sp,#8]           ;168
0000fe  eb001b06          ADD      r11,r0,r6,LSL #4      ;169
000102  f10b0b08          ADD      r11,r11,#8            ;169
000106  f818b00b          LDRB     r11,[r8,r11]          ;169
00010a  f8dde008          LDR      lr,[sp,#8]            ;169
00010e  ea4b0b0e          ORR      r11,r11,lr            ;169
000112  f8cdb008          STR      r11,[sp,#8]           ;169
000116  f1050b01          ADD      r11,r5,#1             ;170
00011a  f1bb0f1f          CMP      r11,#0x1f             ;170
00011e  dd01              BLE      |L3.292|
000120  f0810101          EOR      r1,r1,#1              ;171
                  |L3.292|
000124  f8dfb190          LDR      r11,|L3.696|
000128  f10b0b0c          ADD      r11,r11,#0xc          ;172
00012c  f85be021          LDR      lr,[r11,r1,LSL #2]    ;172
000130  f8ddb010          LDR      r11,[sp,#0x10]        ;172
000134  eb051b4b          ADD      r11,r5,r11,LSL #5     ;172
000138  f10b0b01          ADD      r11,r11,#1            ;172
00013c  f81e600b          LDRB     r6,[lr,r11]           ;172
000140  eb001b06          ADD      r11,r0,r6,LSL #4      ;173
000144  f818b00b          LDRB     r11,[r8,r11]          ;173
000148  f8cdb004          STR      r11,[sp,#4]           ;173
00014c  eb001b06          ADD      r11,r0,r6,LSL #4      ;174
000150  f10b0b08          ADD      r11,r11,#8            ;174
000154  f818b00b          LDRB     r11,[r8,r11]          ;174
000158  f8dde004          LDR      lr,[sp,#4]            ;174
00015c  ea4b0b0e          ORR      r11,r11,lr            ;174
000160  f8cdb004          STR      r11,[sp,#4]           ;174
000164  f8ddb008          LDR      r11,[sp,#8]           ;175
000168  fa0bfb0a          LSL      r11,r11,r10           ;175
00016c  f8dde004          LDR      lr,[sp,#4]            ;175
000170  fa4efe0a          ASR      lr,lr,r10             ;175
000174  ea4b0b0e          ORR      r11,r11,lr            ;175
000178  f00b0bff          AND      r11,r11,#0xff         ;175
00017c  f8cdb000          STR      r11,[sp,#0]           ;175
000180  f8dfb130          LDR      r11,|L3.692|
000184  f8dbb000          LDR      r11,[r11,#0]          ;177  ; sprite
000188  f89bb002          LDRB     r11,[r11,#2]          ;177
00018c  f00b0b80          AND      r11,r11,#0x80         ;177
000190  f1bb0f00          CMP      r11,#0                ;177
000194  d003              BEQ      |L3.414|
000196  f8ddb00c          LDR      r11,[sp,#0xc]         ;178
00019a  ebab0000          SUB      r0,r11,r0             ;178
                  |L3.414|
00019e  f8dfb110          LDR      r11,|L3.688|
0001a2  f89bb002          LDRB     r11,[r11,#2]          ;179  ; PPU_Reg
0001a6  f00b0b20          AND      r11,r11,#0x20         ;179
0001aa  f1bb0f00          CMP      r11,#0                ;179
0001ae  d02b              BEQ      |L3.520|
0001b0  f8dfb100          LDR      r11,|L3.692|
0001b4  f8dbb000          LDR      r11,[r11,#0]          ;180  ; sprite
0001b8  f89bb001          LDRB     r11,[r11,#1]          ;180
0001bc  f00b0b01          AND      r11,r11,#1            ;180
0001c0  f1bb0f00          CMP      r11,#0                ;180
0001c4  d004              BEQ      |L3.464|
0001c6  f8dfb0f0          LDR      r11,|L3.696|
0001ca  f8dbb008          LDR      r11,[r11,#8]          ;180  ; PPU_Mem
0001ce  e003              B        |L3.472|
                  |L3.464|
0001d0  f8dfb0e4          LDR      r11,|L3.696|
0001d4  f8dbb004          LDR      r11,[r11,#4]          ;180  ; PPU_Mem
                  |L3.472|
0001d8  46d9              MOV      r9,r11                ;180
0001da  f8dfb0d8          LDR      r11,|L3.692|
0001de  f8dbb000          LDR      r11,[r11,#0]          ;181  ; sprite
0001e2  f89bb001          LDRB     r11,[r11,#1]          ;181
0001e6  f00b0bfe          AND      r11,r11,#0xfe         ;181
0001ea  ea4f120b          LSL      r2,r11,#4             ;181
0001ee  eb020b00          ADD      r11,r2,r0             ;182
0001f2  f819700b          LDRB     r7,[r9,r11]           ;182
0001f6  eb020b00          ADD      r11,r2,r0             ;183
0001fa  f10b0b08          ADD      r11,r11,#8            ;183
0001fe  f819b00b          LDRB     r11,[r9,r11]          ;183
000202  ea4b0707          ORR      r7,r11,r7             ;183
000206  e026              B        |L3.598|
                  |L3.520|
000208  f8dfb0a4          LDR      r11,|L3.688|
00020c  f89bb000          LDRB     r11,[r11,#0]          ;185  ; PPU_Reg
000210  f00b0b08          AND      r11,r11,#8            ;185
000214  f1bb0f00          CMP      r11,#0                ;185
000218  d004              BEQ      |L3.548|
00021a  f8dfb09c          LDR      r11,|L3.696|
00021e  f8dbb008          LDR      r11,[r11,#8]          ;185  ; PPU_Mem
000222  e003              B        |L3.556|
                  |L3.548|
000224  f8dfb090          LDR      r11,|L3.696|
000228  f8dbb004          LDR      r11,[r11,#4]          ;185  ; PPU_Mem
                  |L3.556|
00022c  46d9              MOV      r9,r11                ;185
00022e  f8dfb084          LDR      r11,|L3.692|
000232  f8dbb000          LDR      r11,[r11,#0]          ;186  ; sprite
000236  f89bb001          LDRB     r11,[r11,#1]          ;186
00023a  ea4f120b          LSL      r2,r11,#4             ;186
00023e  eb020b00          ADD      r11,r2,r0             ;187
000242  f819700b          LDRB     r7,[r9,r11]           ;187
000246  eb020b00          ADD      r11,r2,r0             ;188
00024a  f10b0b08          ADD      r11,r11,#8            ;188
00024e  f819b00b          LDRB     r11,[r9,r11]          ;188
000252  ea4b0707          ORR      r7,r11,r7             ;188
                  |L3.598|
000256  f8dfb05c          LDR      r11,|L3.692|
00025a  f8dbb000          LDR      r11,[r11,#0]          ;191  ; sprite
00025e  f89bb002          LDRB     r11,[r11,#2]          ;191
000262  f00b0b40          AND      r11,r11,#0x40         ;191
000266  f1bb0f00          CMP      r11,#0                ;191
00026a  d011              BEQ      |L3.656|
00026c  f04f0c00          MOV      r12,#0                ;192
000270  2300              MOVS     r3,#0                 ;193
000272  e00a              B        |L3.650|
                  |L3.628|
000274  fa47fb03          ASR      r11,r7,r3             ;194
000278  f00b0b01          AND      r11,r11,#1            ;194
00027c  ea4b0c0c          ORR      r12,r11,r12           ;194
000280  fa0cfb03          LSL      r11,r12,r3            ;195
000284  f00b0cff          AND      r12,r11,#0xff         ;195
000288  1c5b              ADDS     r3,r3,#1              ;193
                  |L3.650|
00028a  2b08              CMP      r3,#8                 ;193
00028c  dbf2              BLT      |L3.628|
00028e  4667              MOV      r7,r12                ;197
                  |L3.656|
000290  f8ddb000          LDR      r11,[sp,#0]           ;199
000294  ea070b0b          AND      r11,r7,r11            ;199
000298  f1bb0f00          CMP      r11,#0                ;199
00029c  d005              BEQ      |L3.682|
00029e  f04f0b01          MOV      r11,#1                ;200
0002a2  f8dfe020          LDR      lr,|L3.708|
0002a6  f88eb000          STRB     r11,[lr,#0]           ;200
                  |L3.682|
0002aa  bf00              NOP      
0002ac  e6cf              B        |L3.78|
;;;203    static __forceinline void render_bg_line_fast(int y_axes) {
                          ENDP

0002ae  0000              DCW      0x0000
                  |L3.688|
                          DCD      PPU_Reg
                  |L3.692|
                          DCD      sprite
                  |L3.696|
                          DCD      PPU_Mem
                  |L3.700|
                          DCD      PPU_BG_VScrlOrg
                  |L3.704|
                          DCD      PPU_BG_HScrlOrg
                  |L3.708|
                          DCD      SpriteHitFlag

                          AREA ||i.premap_palette||, CODE, READONLY, ALIGN=2

                  premap_palette PROC
;;;96     
;;;97     void premap_palette() {
000000  b510              PUSH     {r4,lr}
;;;98         extern uint32_t Premapped_palette[16*16]; //TODO: this smarter \/
;;;99         for (int i=0; i<16; i++)
000002  2100              MOVS     r1,#0
000004  e016              B        |L4.52|
                  |L4.6|
;;;100            for (int j=0; j<16; j++)
000006  2000              MOVS     r0,#0
000008  e011              B        |L4.46|
                  |L4.10|
;;;101                Premapped_palette[i + j*16] = 
00000a  4a0c              LDR      r2,|L4.60|
00000c  5c52              LDRB     r2,[r2,r1]
00000e  4b0c              LDR      r3,|L4.64|
000010  f8333012          LDRH     r3,[r3,r2,LSL #1]
000014  4a09              LDR      r2,|L4.60|
000016  5c12              LDRB     r2,[r2,r0]
000018  4c09              LDR      r4,|L4.64|
00001a  f8342012          LDRH     r2,[r4,r2,LSL #1]
00001e  ea434202          ORR      r2,r3,r2,LSL #16
000022  eb011300          ADD      r3,r1,r0,LSL #4
000026  4c07              LDR      r4,|L4.68|
000028  f8442023          STR      r2,[r4,r3,LSL #2]
00002c  1c40              ADDS     r0,r0,#1              ;100
                  |L4.46|
00002e  2810              CMP      r0,#0x10              ;100
000030  dbeb              BLT      |L4.10|
000032  1c49              ADDS     r1,r1,#1              ;99
                  |L4.52|
000034  2910              CMP      r1,#0x10              ;99
000036  dbe6              BLT      |L4.6|
;;;102                    ((uint32_t)NES_Color_Palette[PPU_Mem.image_palette[i]]) |
;;;103                    ((uint32_t)NES_Color_Palette[PPU_Mem.image_palette[j]]) << 16;
;;;104    }
000038  bd10              POP      {r4,pc}
;;;105    
                          ENDP

00003a  0000              DCW      0x0000
                  |L4.60|
                          DCD      PPU_Mem+0x1c
                  |L4.64|
                          DCD      NES_Color_Palette
                  |L4.68|
                          DCD      Premapped_palette

                          AREA ||i.render_bg_line||, CODE, READONLY, ALIGN=2

                  render_bg_line PROC
;;;295    }
;;;296    static void render_bg_line(int y_axes)   
000000  e92d4ff1          PUSH     {r0,r4-r11,lr}
;;;297    {   
000004  b092              SUB      sp,sp,#0x48
;;;298        int     i;   
;;;299        // int     Buffer_LineCnt;
;;;300        int x_TitleLine;   
;;;301        uint8_t   H_byte, L_byte, BG_color_num, BG_attr_value;   
;;;302        uint8_t   _nNameTable =  PPU_Reg.R0 & R0_NAME_TABLE;
000006  4872              LDR      r0,|L5.464|
000008  7800              LDRB     r0,[r0,#0]  ; PPU_Reg
00000a  f0000003          AND      r0,r0,#3
00000e  900f              STR      r0,[sp,#0x3c]
;;;303        const uint8_t  *BG_Patterntable;   
;;;304       
;;;305    //  nNameTable = PPU_BG_NameTableNum; 
;;;306        BG_Patterntable = PPU_Reg.R0 & BG_PATTERN_ADDR ? PPU_Mem.patterntable1 : PPU_Mem.patterntable0;
000010  486f              LDR      r0,|L5.464|
000012  7800              LDRB     r0,[r0,#0]  ; PPU_Reg
000014  f0000010          AND      r0,r0,#0x10
000018  b110              CBZ      r0,|L5.32|
00001a  486e              LDR      r0,|L5.468|
00001c  6880              LDR      r0,[r0,#8]  ; PPU_Mem
00001e  e001              B        |L5.36|
                  |L5.32|
000020  486c              LDR      r0,|L5.468|
000022  6840              LDR      r0,[r0,#4]  ; PPU_Mem
                  |L5.36|
000024  4683              MOV      r11,r0
;;;307        int _y_scroll = y_axes + PPU_BG_VScrlOrg; 
000026  496c              LDR      r1,|L5.472|
000028  7809              LDRB     r1,[r1,#0]  ; PPU_BG_VScrlOrg
00002a  9812              LDR      r0,[sp,#0x48]
00002c  4408              ADD      r0,r0,r1
00002e  900e              STR      r0,[sp,#0x38]
;;;308        if(_y_scroll > 239){   
000030  980e              LDR      r0,[sp,#0x38]
000032  28ef              CMP      r0,#0xef
000034  dd06              BLE      |L5.68|
;;;309            _y_scroll -= 240;   
000036  980e              LDR      r0,[sp,#0x38]
000038  38f0              SUBS     r0,r0,#0xf0
00003a  900e              STR      r0,[sp,#0x38]
;;;310            _nNameTable ^= NAME_TABLE_V_MASK;
00003c  980f              LDR      r0,[sp,#0x3c]
00003e  f0800002          EOR      r0,r0,#2
000042  900f              STR      r0,[sp,#0x3c]
                  |L5.68|
;;;311        }   
;;;312        const uint8_t nNameTable = _nNameTable;
000044  980f              LDR      r0,[sp,#0x3c]
000046  900d              STR      r0,[sp,#0x34]
;;;313        const int y_scroll = _y_scroll;
000048  980e              LDR      r0,[sp,#0x38]
00004a  900c              STR      r0,[sp,#0x30]
;;;314    
;;;315        uint16_t premap_palette[16] = {0};
00004c  2120              MOVS     r1,#0x20
00004e  a804              ADD      r0,sp,#0x10
000050  f7fffffe          BL       __aeabi_memclr4
;;;316        for (int i=0; i<16; i++)
000054  2000              MOVS     r0,#0
000056  e009              B        |L5.108|
                  |L5.88|
;;;317            premap_palette[i] = NES_Color_Palette[PPU_Mem.image_palette[i]];
000058  495e              LDR      r1,|L5.468|
00005a  311c              ADDS     r1,r1,#0x1c
00005c  5c09              LDRB     r1,[r1,r0]
00005e  4a5f              LDR      r2,|L5.476|
000060  f8321011          LDRH     r1,[r2,r1,LSL #1]
000064  aa04              ADD      r2,sp,#0x10
000066  f8221010          STRH     r1,[r2,r0,LSL #1]
00006a  1c40              ADDS     r0,r0,#1              ;316
                  |L5.108|
00006c  2810              CMP      r0,#0x10              ;316
00006e  dbf3              BLT      |L5.88|
;;;318    
;;;319        uint8_t* nNameTablePtr;
;;;320        const int y_TitleLine = y_scroll >> 3;
000070  980c              LDR      r0,[sp,#0x30]
000072  10c7              ASRS     r7,r0,#3
;;;321        const int dy_axes = y_scroll & 0x07;  
000074  980c              LDR      r0,[sp,#0x30]
000076  f0000007          AND      r0,r0,#7
00007a  9003              STR      r0,[sp,#0xc]
;;;322    //  x_scroll =  PPU_BG_HScrlOrg_Pre;           
;;;323        const int dx_axes = PPU_BG_HScrlOrg & 0x07;
00007c  4858              LDR      r0,|L5.480|
00007e  7800              LDRB     r0,[r0,#0]  ; PPU_BG_HScrlOrg
000080  f0000007          AND      r0,r0,#7
000084  9002              STR      r0,[sp,#8]
;;;324        uint16_t* bufptr = &Buffer_scanline[8 - dx_axes];
000086  9802              LDR      r0,[sp,#8]
000088  f1c00008          RSB      r0,r0,#8
00008c  4955              LDR      r1,|L5.484|
00008e  eb010840          ADD      r8,r1,r0,LSL #1
;;;325    
;;;326        nNameTablePtr = PPU_Mem.name_table[nNameTable];
000092  4850              LDR      r0,|L5.468|
000094  300c              ADDS     r0,r0,#0xc
000096  990d              LDR      r1,[sp,#0x34]
000098  f850a021          LDR      r10,[r0,r1,LSL #2]
;;;327        for(x_TitleLine = PPU_BG_HScrlOrg >> 3; x_TitleLine < 32; x_TitleLine++){  
00009c  4850              LDR      r0,|L5.480|
00009e  7800              LDRB     r0,[r0,#0]  ; PPU_BG_HScrlOrg
0000a0  10c4              ASRS     r4,r0,#3
0000a2  e03f              B        |L5.292|
                  |L5.164|
;;;328            uint32_t BG_TitlePatNum = (nNameTablePtr[(y_TitleLine << 5) + x_TitleLine]<<4) + dy_axes;
0000a4  eb041147          ADD      r1,r4,r7,LSL #5
0000a8  f81a2001          LDRB     r2,[r10,r1]
0000ac  9903              LDR      r1,[sp,#0xc]
0000ae  eb011002          ADD      r0,r1,r2,LSL #4
;;;329            L_byte = BG_Patterntable[BG_TitlePatNum];
0000b2  f81b1000          LDRB     r1,[r11,r0]
0000b6  9110              STR      r1,[sp,#0x40]
;;;330            H_byte = BG_Patterntable[BG_TitlePatNum + 8];         
0000b8  f1000108          ADD      r1,r0,#8
0000bc  f81b1001          LDRB     r1,[r11,r1]
0000c0  9111              STR      r1,[sp,#0x44]
;;;331            BG_attr_value = nNameTablePtr[960 + ((y_TitleLine >> 2) << 3) + (x_TitleLine >> 2)]; 
0000c2  10b9              ASRS     r1,r7,#2
0000c4  f44f7270          MOV      r2,#0x3c0
0000c8  eb0201c1          ADD      r1,r2,r1,LSL #3
0000cc  eb0101a4          ADD      r1,r1,r4,ASR #2
0000d0  f81a9001          LDRB     r9,[r10,r1]
;;;332            BG_attr_value = ((BG_attr_value >> (((y_TitleLine & 2) << 1) | (x_TitleLine & 2))) & 3) << 2;  
0000d4  f0040102          AND      r1,r4,#2
0000d8  f0070202          AND      r2,r7,#2
0000dc  ea410142          ORR      r1,r1,r2,LSL #1
0000e0  fa49f101          ASR      r1,r9,r1
0000e4  0789              LSLS     r1,r1,#30
0000e6  ea4f7911          LSR      r9,r1,#28
;;;333            for(i=7; i>=0; i--){ 
0000ea  2507              MOVS     r5,#7
0000ec  e017              B        |L5.286|
                  |L5.238|
;;;334                BG_color_num = BG_attr_value;   
0000ee  464e              MOV      r6,r9
;;;335                BG_color_num |=(L_byte >> i) & 1;                
0000f0  9910              LDR      r1,[sp,#0x40]
0000f2  4129              ASRS     r1,r1,r5
0000f4  f0010101          AND      r1,r1,#1
0000f8  430e              ORRS     r6,r6,r1
;;;336                BG_color_num |=((H_byte >> i) & 1) << 1;   
0000fa  9911              LDR      r1,[sp,#0x44]
0000fc  4129              ASRS     r1,r1,r5
0000fe  f0010101          AND      r1,r1,#1
000102  ea460641          ORR      r6,r6,r1,LSL #1
;;;337                if(BG_color_num & 3){
000106  f0060103          AND      r1,r6,#3
00010a  b129              CBZ      r1,|L5.280|
;;;338                    *bufptr++ =  premap_palette[BG_color_num];   
00010c  a904              ADD      r1,sp,#0x10
00010e  f8311016          LDRH     r1,[r1,r6,LSL #1]
000112  f8281b02          STRH     r1,[r8],#2
000116  e001              B        |L5.284|
                  |L5.280|
;;;339                    // *bufptr++ =  NES_Color_Palette[PPU_Mem.image_palette[BG_color_num]];   
;;;340                    // Buffer_LineCnt++;   
;;;341                }else{   
;;;342                    // Buffer_LineCnt++;  
;;;343                    bufptr++; 
000118  f1080802          ADD      r8,r8,#2
                  |L5.284|
00011c  1e6d              SUBS     r5,r5,#1              ;333
                  |L5.286|
00011e  2d00              CMP      r5,#0                 ;333
000120  dae5              BGE      |L5.238|
000122  1c64              ADDS     r4,r4,#1              ;327
                  |L5.292|
000124  2c20              CMP      r4,#0x20              ;327
000126  dbbd              BLT      |L5.164|
;;;344                }   
;;;345            }   
;;;346        } 
;;;347    
;;;348        nNameTablePtr = PPU_Mem.name_table[nNameTable ^ NAME_TABLE_H_MASK]; 
000128  980d              LDR      r0,[sp,#0x34]
00012a  f0800101          EOR      r1,r0,#1
00012e  4829              LDR      r0,|L5.468|
000130  300c              ADDS     r0,r0,#0xc
000132  f850a021          LDR      r10,[r0,r1,LSL #2]
;;;349    //  Buffer_LineCnt -= dx_axes;  
;;;350        int end = (PPU_BG_HScrlOrg >> 3);
000136  482a              LDR      r0,|L5.480|
000138  7800              LDRB     r0,[r0,#0]  ; PPU_BG_HScrlOrg
00013a  10c0              ASRS     r0,r0,#3
00013c  9001              STR      r0,[sp,#4]
;;;351        for (x_TitleLine = 0; x_TitleLine <= end; x_TitleLine++ ){   
00013e  2400              MOVS     r4,#0
000140  e03f              B        |L5.450|
                  |L5.322|
;;;352            uint32_t BG_TitlePatNum = (nNameTablePtr[(y_TitleLine << 5) + x_TitleLine]<<4) + dy_axes;
000142  eb041147          ADD      r1,r4,r7,LSL #5
000146  f81a2001          LDRB     r2,[r10,r1]
00014a  9903              LDR      r1,[sp,#0xc]
00014c  eb011002          ADD      r0,r1,r2,LSL #4
;;;353            L_byte = BG_Patterntable[BG_TitlePatNum];
000150  f81b1000          LDRB     r1,[r11,r0]
000154  9110              STR      r1,[sp,#0x40]
;;;354            H_byte = BG_Patterntable[BG_TitlePatNum + 8];         
000156  f1000108          ADD      r1,r0,#8
00015a  f81b1001          LDRB     r1,[r11,r1]
00015e  9111              STR      r1,[sp,#0x44]
;;;355            BG_attr_value = nNameTablePtr[960 + ((y_TitleLine >> 2) << 3) + (x_TitleLine >> 2)]; 
000160  10b9              ASRS     r1,r7,#2
000162  f44f7270          MOV      r2,#0x3c0
000166  eb0201c1          ADD      r1,r2,r1,LSL #3
00016a  eb0101a4          ADD      r1,r1,r4,ASR #2
00016e  f81a9001          LDRB     r9,[r10,r1]
;;;356            BG_attr_value = ((BG_attr_value >> (((y_TitleLine & 2) << 1) | (x_TitleLine & 2))) & 3) << 2;  
000172  f0040102          AND      r1,r4,#2
000176  f0070202          AND      r2,r7,#2
00017a  ea410142          ORR      r1,r1,r2,LSL #1
00017e  fa49f101          ASR      r1,r9,r1
000182  0789              LSLS     r1,r1,#30
000184  ea4f7911          LSR      r9,r1,#28
;;;357            for(i=7; i>=0; i--){ 
000188  2507              MOVS     r5,#7
00018a  e017              B        |L5.444|
                  |L5.396|
;;;358                BG_color_num = BG_attr_value;   
00018c  464e              MOV      r6,r9
;;;359                BG_color_num |=(L_byte >> i) & 1;                
00018e  9910              LDR      r1,[sp,#0x40]
000190  4129              ASRS     r1,r1,r5
000192  f0010101          AND      r1,r1,#1
000196  430e              ORRS     r6,r6,r1
;;;360                BG_color_num |=((H_byte >> i) & 1) << 1;   
000198  9911              LDR      r1,[sp,#0x44]
00019a  4129              ASRS     r1,r1,r5
00019c  f0010101          AND      r1,r1,#1
0001a0  ea460641          ORR      r6,r6,r1,LSL #1
;;;361                if(BG_color_num & 3){
0001a4  f0060103          AND      r1,r6,#3
0001a8  b129              CBZ      r1,|L5.438|
;;;362                    *bufptr++ = premap_palette[BG_color_num];   
0001aa  a904              ADD      r1,sp,#0x10
0001ac  f8311016          LDRH     r1,[r1,r6,LSL #1]
0001b0  f8281b02          STRH     r1,[r8],#2
0001b4  e001              B        |L5.442|
                  |L5.438|
;;;363                    // *bufptr++ = NES_Color_Palette[PPU_Mem.image_palette[BG_color_num]];   
;;;364                    // Buffer_LineCnt++;   
;;;365                }else{   
;;;366                    // Buffer_LineCnt++;  
;;;367                    bufptr++; 
0001b6  f1080802          ADD      r8,r8,#2
                  |L5.442|
0001ba  1e6d              SUBS     r5,r5,#1              ;357
                  |L5.444|
0001bc  2d00              CMP      r5,#0                 ;357
0001be  dae5              BGE      |L5.396|
0001c0  1c64              ADDS     r4,r4,#1              ;351
                  |L5.450|
0001c2  9801              LDR      r0,[sp,#4]            ;351
0001c4  4284              CMP      r4,r0                 ;351
0001c6  ddbc              BLE      |L5.322|
;;;368                }   
;;;369            }   
;;;370        }   
;;;371    }   
0001c8  b013              ADD      sp,sp,#0x4c
0001ca  e8bd8ff0          POP      {r4-r11,pc}
;;;372    
                          ENDP

0001ce  0000              DCW      0x0000
                  |L5.464|
                          DCD      PPU_Reg
                  |L5.468|
                          DCD      PPU_Mem
                  |L5.472|
                          DCD      PPU_BG_VScrlOrg
                  |L5.476|
                          DCD      NES_Color_Palette
                  |L5.480|
                          DCD      PPU_BG_HScrlOrg
                  |L5.484|
                          DCD      Buffer_scanline

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  NameTable
                          %        2048
                  PPU_Mem
                          %        60
                  Spr_Mem
                          %        258
                  DisplayBuffer
                          %        122880
                  Buffer_scanline
                          %        546
                  Premapped_palette
                          %        1024

                          AREA ||.constdata||, DATA, READONLY, ALIGN=2

                  STREAM_OFFSET_TAB
000000  10284058          DCB      0x10,0x28,0x40,0x58
000004  7088a0b8          DCB      0x70,0x88,0xa0,0xb8
                  aRCC_PLLSAIDIVRPrescTable
000008  02040810          DCB      0x02,0x04,0x08,0x10
                  OFFSET_TAB_CCMRx
00000c  00000000          DCB      0x00,0x00,0x00,0x00
000010  040404            DCB      0x04,0x04,0x04
                  SHIFT_TAB_OCxx
000013  00                DCB      0x00
000014  00080000          DCB      0x00,0x08,0x00,0x00
000018  0008              DCB      0x00,0x08
                  SHIFT_TAB_ICxx
00001a  0000              DCB      0x00,0x00
00001c  08000000          DCB      0x08,0x00,0x00,0x00
000020  08                DCB      0x08
                  SHIFT_TAB_CCxP
000021  000204            DCB      0x00,0x02,0x04
000024  06080a0c          DCB      0x06,0x08,0x0a,0x0c
                  SHIFT_TAB_OISx
000028  00010203          DCB      0x00,0x01,0x02,0x03
00002c  04050600          DCB      0x04,0x05,0x06,0x00
                  sprite
                          DCD      Spr_Mem
                  NES_Color_Palette
000034  ae73d120          DCW      0xae73,0xd120
000038  15001340          DCW      0x1500,0x1340
00003c  0e8802a8          DCW      0x0e88,0x02a8
000040  00a04078          DCW      0x00a0,0x4078
000044  60412002          DCW      0x6041,0x2002
000048  8002e201          DCW      0x8002,0xe201
00004c  eb190000          DCW      0xeb19,0x0000
000050  00000000          DCW      0x0000,0x0000
000054  f7bd9d03          DCW      0xf7bd,0x9d03
000058  dd211e80          DCW      0xdd21,0x1e80
00005c  17b80be0          DCW      0x17b8,0x0be0
000060  40d961ca          DCW      0x40d9,0x61ca
000064  808ba004          DCW      0x808b,0xa004
000068  40058704          DCW      0x4005,0x8704
00006c  11040000          DCW      0x1104,0x0000
000070  00000000          DCW      0x0000,0x0000
000074  ffffff3d          DCW      0xffff,0xff3d
000078  bf5c5fa4          DCW      0xbf5c,0x5fa4
00007c  dff3b6fb          DCW      0xdff3,0xb6fb
000080  acfbc7fc          DCW      0xacfb,0xc7fc
000084  e7f58286          DCW      0xe7f5,0x8286
000088  e94ed35f          DCW      0xe94e,0xd35f
00008c  5b070000          DCW      0x5b07,0x0000
000090  00000000          DCW      0x0000,0x0000
000094  ffff3faf          DCW      0xffff,0x3faf
000098  bfc65fd6          DCW      0xbfc6,0x5fd6
00009c  3ffe3bfe          DCW      0x3ffe,0x3bfe
0000a0  f6fdd5fe          DCW      0xf6fd,0xd5fe
0000a4  34fff4e7          DCW      0x34ff,0xf4e7
0000a8  97aff9b7          DCW      0x97af,0xf9b7
0000ac  fe9f0000          DCW      0xfe9f,0x0000
0000b0  00000000          DCW      0x0000,0x0000

                          AREA ||.data||, DATA, ALIGN=2

                  PPU_Reg
                          DCD      0x00000000
                  SpriteHitFlag
000004  00                DCB      0x00
                  PPU_Latch_Flag
000005  000000            DCB      0x00,0x00,0x00
                  PPU_scanline
                          DCD      0x00000000
                  PPU_BG_VScrlOrg
00000c  00                DCB      0x00
                  PPU_BG_HScrlOrg
00000d  00                DCB      0x00

;*** Start embedded assembler ***

#line 1 "..\\Src\\ppu.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___5_ppu_c_sprite____REV16|
#line 388 "../Drivers/CMSIS/Include/cmsis_armcc.h"
|__asm___5_ppu_c_sprite____REV16| PROC
#line 389

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___5_ppu_c_sprite____REVSH|
#line 402
|__asm___5_ppu_c_sprite____REVSH| PROC
#line 403

 revsh r0, r0
 bx lr
	ENDP
	AREA ||.rrx_text||, CODE
	THUMB
	EXPORT |__asm___5_ppu_c_sprite____RRX|
#line 587
|__asm___5_ppu_c_sprite____RRX| PROC
#line 588

 rrx r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
